{"ast":null,"code":"import axio from 'axio';\nimport Cookies from 'universal-cookie';\nimport { connectionError } from './helpers';\nimport { optionAlert } from '../components/option-alert/option-alert.component';\n\nvar request = function request(method, url, data) {\n  var cookies = new Cookies();\n  var token = cookies.get('authToken');\n};\n\nexport default (function (_ref) {\n  var _ref$endPoint = _ref.endPoint,\n      endPoint = _ref$endPoint === void 0 ? '' : _ref$endPoint,\n      _ref$method = _ref.method,\n      method = _ref$method === void 0 ? 'GET' : _ref$method,\n      body = _ref.body,\n      _ref$timeout = _ref.timeout,\n      timeout = _ref$timeout === void 0 ? 20000 : _ref$timeout;\n  // ${process.env.REACT_APP_SERVER_URL}\n  var cookies = new Cookies();\n  var token = cookies.get('authToken');\n  return Promise.race([fetch(\"localhost:3000\".concat(endPoint), {\n    method: method,\n    headers: {\n      'Content-Type': 'application/json',\n      'x-access-token': token ? token : ''\n    },\n    body: body ? JSON.stringify(body) : undefined\n  }), new Promise(function (_, reject) {\n    return setTimeout(function () {\n      return reject(new Error('timeout'));\n    }, timeout);\n  })]).then(function (res) {\n    return res.json();\n  }).then(function (data) {\n    if (data && data.error != null) {\n      var _data$error = data.error,\n          title = _data$error.title,\n          message = _data$error.message;\n      optionAlert({\n        title: title,\n        message: message\n      });\n    }\n\n    return data;\n  }).catch(function () {\n    return connectionError();\n  });\n});","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/client/src/helpers/apiRequest.js"],"names":["axio","Cookies","connectionError","optionAlert","request","method","url","data","cookies","token","get","endPoint","body","timeout","Promise","race","fetch","headers","JSON","stringify","undefined","_","reject","setTimeout","Error","then","res","json","error","title","message","catch"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AAEA,SAASC,eAAT,QAAgC,WAAhC;AACA,SAASC,WAAT,QAA4B,mDAA5B;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,MAAD,EAASC,GAAT,EAAcC,IAAd,EAAuB;AACnC,MAAMC,OAAO,GAAG,IAAIP,OAAJ,EAAhB;AACA,MAAMQ,KAAK,GAAGD,OAAO,CAACE,GAAR,CAAY,WAAZ,CAAd;AACH,CAHD;;AAKA,gBAAe,gBAKT;AAAA,2BAJLC,QAIK;AAAA,MAJLA,QAIK,8BAJM,EAIN;AAAA,yBAHLN,MAGK;AAAA,MAHLA,MAGK,4BAHI,KAGJ;AAAA,MAFLO,IAEK,QAFLA,IAEK;AAAA,0BADLC,OACK;AAAA,MADLA,OACK,6BADK,KACL;AACF;AACA,MAAML,OAAO,GAAG,IAAIP,OAAJ,EAAhB;AACA,MAAMQ,KAAK,GAAGD,OAAO,CAACE,GAAR,CAAY,WAAZ,CAAd;AACA,SAAOI,OAAO,CAACC,IAAR,CAAa,CAACC,KAAK,yBAAkBL,QAAlB,GAA8B;AAC1DN,IAAAA,MAAM,EAANA,MAD0D;AAE1DY,IAAAA,OAAO,EAAE;AACC,sBAAgB,kBADjB;AAEC,wBAAkBR,KAAK,GAAGA,KAAH,GAAW;AAFnC,KAFiD;AAM1DG,IAAAA,IAAI,EAAEA,IAAI,GAAGM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAH,GAA0BQ;AANsB,GAA9B,CAAN,EAQhB,IAAIN,OAAJ,CAAY,UAACO,CAAD,EAAIC,MAAJ;AAAA,WACRC,UAAU,CAAC;AAAA,aAAMD,MAAM,CAAC,IAAIE,KAAJ,CAAU,SAAV,CAAD,CAAZ;AAAA,KAAD,EAAqCX,OAArC,CADF;AAAA,GAAZ,CARgB,CAAb,EAYLY,IAZK,CAYA,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GAZH,EAaLF,IAbK,CAaA,UAAAlB,IAAI,EAAI;AACP,QAAIA,IAAI,IAAIA,IAAI,CAACqB,KAAL,IAAc,IAA1B,EAAgC;AAAA,wBACDrB,IAAI,CAACqB,KADJ;AAAA,UACpBC,KADoB,eACpBA,KADoB;AAAA,UACbC,OADa,eACbA,OADa;AAE5B3B,MAAAA,WAAW,CAAC;AACR0B,QAAAA,KAAK,EAALA,KADQ;AAERC,QAAAA,OAAO,EAAPA;AAFQ,OAAD,CAAX;AAIH;;AACP,WAAOvB,IAAP;AACA,GAtBK,EAuBLwB,KAvBK,CAuBC;AAAA,WAAM7B,eAAe,EAArB;AAAA,GAvBD,CAAP;AAwBH,CAjCD","sourcesContent":["import axio from 'axio';\nimport Cookies from 'universal-cookie';\n\nimport { connectionError } from './helpers';\nimport { optionAlert } from '../components/option-alert/option-alert.component';\n\nconst request = (method, url, data) => {\n    const cookies = new Cookies();\n    const token = cookies.get('authToken')\n}\n\nexport default ({\n\tendPoint = '',\n\tmethod = 'GET',\n\tbody,\n\ttimeout = 20000\n}) => {\n    // ${process.env.REACT_APP_SERVER_URL}\n    const cookies = new Cookies();\n    const token = cookies.get('authToken')\n    return Promise.race([fetch(`localhost:3000${endPoint}`, {\n\t\tmethod,\n\t\theaders: {\n            'Content-Type': 'application/json',\n            'x-access-token': token ? token : ''\n        },\n\t\tbody: body ? JSON.stringify(body) : undefined\n\t}),\n        new Promise((_, reject) =>\n            setTimeout(() => reject(new Error('timeout')), timeout)\n        )\n    ])\n    \t.then(res => res.json())\n    \t.then(data => {\n            if (data && data.error != null) {\n                const { title, message } = data.error;\n                optionAlert({\n                    title,\n                    message\n                })\n            }\n    \t\treturn data\n    \t})\n    \t.catch(() => connectionError())\t\t\n}"]},"metadata":{},"sourceType":"module"}