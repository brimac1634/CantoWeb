{"ast":null,"code":"import _classCallCheck from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brianmacpherson/Desktop/cantotalkweb/client/src/components/search-bar/search-bar.component.js\";\nimport React, { Component } from 'react';\nimport './search-bar.styles.css';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport { validateUser, setQueryURL, requestToLogin } from '../../helpers/helpers';\nimport MediaQuery from 'react-responsive';\nimport queryString from 'query-string';\nimport TextInput from '../text-input/text-input.component';\nimport Button from '../button/button.component';\nimport { setPrevRoute as _setPrevRoute } from '../../redux/routing/routing.actions';\nimport { setTempSearch as _setTempSearch, setSearchType as _setSearchType, setSearchKey as _setSearchKey } from '../../redux/search-bar/search-bar.actions';\nimport { routes } from '../../redux/routing/routing.constants';\nimport Controller from '../compound/controller.component';\nimport Trigger from '../compound/trigger.component';\nimport DropDown from '../drop-down/drop-down.component';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    pathName: state.router.location.pathname,\n    hash: state.router.location.hash,\n    search: state.router.location.search,\n    userID: state.user.user.userID,\n    urlSearchKey: state.temp.key,\n    searchType: state.temp.searchType\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateURL: function updateURL(type) {\n      return dispatch(push(type));\n    },\n    setPrevRoute: function setPrevRoute(prevRoute) {\n      return dispatch(_setPrevRoute(prevRoute));\n    },\n    setTempSearch: function setTempSearch(key) {\n      return dispatch(_setTempSearch(key));\n    },\n    setSearchType: function setSearchType(type) {\n      return dispatch(_setSearchType(type));\n    },\n    setSearchKey: function setSearchKey(word) {\n      return dispatch(_setSearchKey(word));\n    }\n  };\n};\n\nvar SearchBar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchBar, _Component);\n\n  function SearchBar(props) {\n    var _this;\n\n    _classCallCheck(this, SearchBar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchBar).call(this, props));\n\n    _this.handleSearchRoute = function (e, route) {\n      var _this$props = _this.props,\n          pathName = _this$props.pathName,\n          updateURL = _this$props.updateURL,\n          userID = _this$props.userID;\n      var SEARCH = routes.SEARCH,\n          LOGIN = routes.LOGIN;\n      e.target.blur();\n\n      if (route === pathName) {\n        updateURL(SEARCH);\n      } else {\n        if (route !== SEARCH && !validateUser(userID)) {\n          requestToLogin(function () {\n            _setPrevRoute(pathName);\n\n            updateURL(LOGIN);\n          });\n        } else {\n          updateURL(route);\n        }\n      }\n    };\n\n    _this.handleSearch = function (word) {\n      var _this$props2 = _this.props,\n          updateURL = _this$props2.updateURL,\n          hash = _this$props2.hash,\n          searchType = _this$props2.searchType;\n      var url = setQueryURL(word, searchType, hash);\n      sessionStorage.setItem('searchURL', JSON.stringify(url));\n      updateURL(url);\n\n      _this.updateSearchList(word);\n    };\n\n    _this.searchChange = function (event) {\n      var word = event.target.value;\n      var initialSearchList = _this.state.initialSearchList;\n\n      _this.setState({\n        tempSearchKey: word\n      });\n\n      if (initialSearchList) {\n        var searchList = initialSearchList.filter(function (item) {\n          return item.includes(word);\n        });\n\n        _this.setState({\n          searchList: searchList\n        });\n      }\n    };\n\n    _this.searchSubmit = function (event) {\n      var _this$props3 = _this.props,\n          pathName = _this$props3.pathName,\n          updateURL = _this$props3.updateURL,\n          setSearchKey = _this$props3.setSearchKey;\n      var tempSearchKey = _this.state.tempSearchKey;\n      var SEARCH = routes.SEARCH,\n          LEARN = routes.LEARN;\n      var enterPressed = event.which === 13;\n\n      if (enterPressed) {\n        event.target.blur();\n\n        if (tempSearchKey) {\n          setSearchKey(tempSearchKey);\n\n          if (pathName === SEARCH) {\n            _this.handleSearch(tempSearchKey);\n          } else if (pathName === LEARN) {\n            _this.handleDeckSearch(tempSearchKey);\n          }\n        } else if (pathName === LEARN) {\n          updateURL(pathName);\n        }\n      }\n    };\n\n    _this.handleDeckSearch = function (key) {\n      var _this$props4 = _this.props,\n          pathName = _this$props4.pathName,\n          updateURL = _this$props4.updateURL;\n      updateURL(\"\".concat(pathName, \"?decksearch=\").concat(key));\n\n      _this.updateSearchList(key);\n    };\n\n    _this.getList = function () {\n      var pathName = _this.props.pathName;\n      var SEARCH = routes.SEARCH,\n          LEARN = routes.LEARN;\n\n      if (pathName === SEARCH) {\n        return 'searchList';\n      } else if (pathName === LEARN) {\n        return 'deckList';\n      }\n    };\n\n    _this.updateSearchList = function (key) {\n      var list = _this.getList();\n\n      var searchList = JSON.parse(localStorage.getItem(list));\n\n      if (searchList !== null) {\n        searchList.unshift(key);\n\n        if (searchList.length > 15) {\n          searchList.pop();\n        }\n\n        var i = searchList.length;\n\n        while (i--) {\n          if (searchList[i] === key && i !== 0) {\n            searchList.splice(i, 1);\n          }\n        }\n      } else {\n        searchList = [key];\n      }\n\n      _this.setState({\n        searchList: searchList,\n        initialSearchList: searchList\n      });\n\n      localStorage.setItem(list, JSON.stringify(searchList));\n    };\n\n    _this.handleNewDeck = function (e) {\n      var _this$props5 = _this.props,\n          updateURL = _this$props5.updateURL,\n          setPrevRoute = _this$props5.setPrevRoute,\n          pathName = _this$props5.pathName,\n          userID = _this$props5.userID;\n      var NEW_DECK = routes.NEW_DECK,\n          LOGIN = routes.LOGIN;\n\n      if (!validateUser(userID)) {\n        requestToLogin(function () {\n          setPrevRoute(pathName);\n          updateURL(LOGIN);\n        });\n      } else {\n        updateURL(\"\".concat(NEW_DECK, \"#0\"));\n      }\n\n      e.target.blur();\n    };\n\n    _this.wordSelect = function (word) {\n      var _this$props6 = _this.props,\n          setTempSearch = _this$props6.setTempSearch,\n          pathName = _this$props6.pathName;\n      var SEARCH = routes.SEARCH,\n          LEARN = routes.LEARN,\n          NEW_DECK = routes.NEW_DECK;\n      setTempSearch(word);\n\n      if (pathName === SEARCH) {\n        _this.handleSearch(word);\n      } else if (pathName === LEARN) {\n        _this.handleDeckSearch(word);\n      } else if (pathName === NEW_DECK) {\n        _setSearchKey(word);\n      }\n    };\n\n    _this.state = {\n      tempSearchKey: '',\n      initialSearchList: [],\n      searchList: []\n    };\n    return _this;\n  }\n\n  _createClass(SearchBar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props7 = this.props,\n          search = _this$props7.search,\n          setSearchType = _this$props7.setSearchType,\n          pathName = _this$props7.pathName,\n          setTempSearch = _this$props7.setTempSearch;\n      var SEARCH = routes.SEARCH,\n          LEARN = routes.LEARN;\n      var list = this.getList();\n      var searchList = JSON.parse(localStorage.getItem(list));\n      this.setState({\n        initialSearchList: searchList,\n        searchList: searchList\n      });\n\n      if (search) {\n        var values = queryString.parse(search);\n\n        if (pathName === SEARCH) {\n          setSearchType(values.searchtype);\n        } else if (pathName === LEARN) {\n          setTempSearch(values.decksearch);\n        }\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var urlSearchKey = this.props.urlSearchKey;\n\n      if (prevProps.urlSearchKey !== urlSearchKey) {\n        this.setState({\n          tempSearchKey: urlSearchKey\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props8 = this.props,\n          pathName = _this$props8.pathName,\n          searchType = _this$props8.searchType,\n          setSearchType = _this$props8.setSearchType,\n          hideSearch = _this$props8.hideSearch;\n      var _this$state = this.state,\n          searchList = _this$state.searchList,\n          tempSearchKey = _this$state.tempSearchKey;\n      var FAVORITES = routes.FAVORITES,\n          RECENT = routes.RECENT,\n          LEARN = routes.LEARN,\n          SEARCH = routes.SEARCH,\n          NEW_DECK = routes.NEW_DECK,\n          EDIT_DECK = routes.EDIT_DECK;\n      var searchOptions = ['All', 'Can', 'Eng', 'Man', 'Jyu'];\n      var showSearch = pathName === SEARCH || pathName === NEW_DECK || pathName === EDIT_DECK;\n      var isLearn = pathName === LEARN || pathName === NEW_DECK || pathName === EDIT_DECK;\n      return React.createElement(MediaQuery, {\n        maxWidth: 574,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, function (matches) {\n        return React.createElement(\"div\", {\n          className: \"search-bar-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 216\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"search-bar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217\n          },\n          __self: this\n        }, !isLearn && React.createElement(\"div\", {\n          className: \"filter-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, React.createElement(Button, {\n          title: matches ? null : 'Recent',\n          icon: \"time\",\n          height: matches ? '44px' : '34px',\n          iconSize: matches ? '22' : null,\n          margin: \"10px 5px 10px 10px\",\n          isSelected: pathName === RECENT ? true : false,\n          handleClick: function handleClick(e) {\n            return _this2.handleSearchRoute(e, RECENT);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }), React.createElement(Button, {\n          title: matches ? null : 'Favorites',\n          icon: \"like-2\",\n          height: matches ? '44px' : '34px',\n          iconSize: matches ? '22' : null,\n          margin: \"10px 5px\",\n          isSelected: pathName === FAVORITES ? true : false,\n          handleClick: function handleClick(e) {\n            return _this2.handleSearchRoute(e, FAVORITES);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231\n          },\n          __self: this\n        })), pathName === LEARN && React.createElement(\"div\", {\n          className: \"filter-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        }, React.createElement(Button, {\n          title: matches ? null : 'New Deck',\n          icon: \"add\",\n          height: matches ? '44px' : '34px',\n          iconSize: matches ? '22' : null,\n          margin: \"10px 5px 10px 10px\",\n          handleClick: _this2.handleNewDeck,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"search-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 256\n          },\n          __self: this\n        }, showSearch && !hideSearch && React.createElement(Controller, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, React.createElement(Trigger, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"center-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, React.createElement(TextInput, {\n          button: searchType,\n          buttonList: searchOptions,\n          handleDropDown: function handleDropDown(type) {\n            return setSearchType(type);\n          },\n          placeholder: \"English/Cantonese/Mandarin/Jyutping\",\n          margin: \"10px 0\",\n          value: tempSearchKey ? tempSearchKey : '',\n          height: matches ? '44px' : '34px',\n          padding: \"2px 5px 2px 2px\",\n          handleChange: _this2.searchChange,\n          onKeyPress: _this2.searchSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }))), React.createElement(DropDown, {\n          list: searchList,\n          handleSelection: _this2.wordSelect,\n          adjustY: -5,\n          maxHeight: \"200px\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        })), pathName === LEARN && !hideSearch && React.createElement(Controller, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(Trigger, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"center-div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, React.createElement(TextInput, {\n          icon: \"search\",\n          placeholder: \"Search for other decks\",\n          margin: \"10px 0\",\n          value: tempSearchKey ? tempSearchKey : '',\n          height: matches ? '44px' : '34px',\n          handleChange: _this2.searchChange,\n          onKeyPress: _this2.searchSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }))), React.createElement(DropDown, {\n          list: searchList,\n          handleSelection: _this2.wordSelect,\n          adjustY: -5,\n          maxHeight: \"200px\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        })))));\n      });\n    }\n  }]);\n\n  return SearchBar;\n}(Component);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/client/src/components/search-bar/search-bar.component.js"],"names":["React","Component","connect","push","validateUser","setQueryURL","requestToLogin","MediaQuery","queryString","TextInput","Button","setPrevRoute","setTempSearch","setSearchType","setSearchKey","routes","Controller","Trigger","DropDown","mapStateToProps","state","pathName","router","location","pathname","hash","search","userID","user","urlSearchKey","temp","key","searchType","mapDispatchToProps","dispatch","updateURL","type","prevRoute","word","SearchBar","props","handleSearchRoute","e","route","SEARCH","LOGIN","target","blur","handleSearch","url","sessionStorage","setItem","JSON","stringify","updateSearchList","searchChange","event","value","initialSearchList","setState","tempSearchKey","searchList","filter","item","includes","searchSubmit","LEARN","enterPressed","which","handleDeckSearch","getList","list","parse","localStorage","getItem","unshift","length","pop","i","splice","handleNewDeck","NEW_DECK","wordSelect","values","searchtype","decksearch","prevProps","hideSearch","FAVORITES","RECENT","EDIT_DECK","searchOptions","showSearch","isLearn","matches"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './search-bar.styles.css';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router'\nimport { validateUser, setQueryURL, requestToLogin } from '../../helpers/helpers';\nimport MediaQuery from 'react-responsive';\nimport queryString from 'query-string';\nimport TextInput from '../text-input/text-input.component';\nimport Button from '../button/button.component';\nimport { setPrevRoute } from '../../redux/routing/routing.actions';\nimport { setTempSearch, setSearchType, setSearchKey } from '../../redux/search-bar/search-bar.actions';\nimport { routes } from '../../redux/routing/routing.constants';\nimport Controller from '../compound/controller.component';\nimport Trigger from '../compound/trigger.component';\nimport DropDown from '../drop-down/drop-down.component';\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tpathName: state.router.location.pathname,\n\t\thash: state.router.location.hash,\n\t\tsearch: state.router.location.search,\n\t\tuserID: state.user.user.userID,\n\t\turlSearchKey: state.temp.key,\n\t\tsearchType: state.temp.searchType,\n\t}\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tupdateURL: (type) => dispatch(push(type)),\n\t\tsetPrevRoute: (prevRoute) => dispatch(setPrevRoute(prevRoute)),\n\t\tsetTempSearch: (key) => dispatch(setTempSearch(key)),\n\t\tsetSearchType: (type) => dispatch(setSearchType(type)),\n\t\tsetSearchKey: (word) => dispatch(setSearchKey(word)),\n\t}\n}\n\nclass SearchBar extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\ttempSearchKey: '',\n\t\t\tinitialSearchList: [],\n\t\t\tsearchList: [],\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { search, setSearchType, pathName, setTempSearch } = this.props;\n\t\tconst { SEARCH, LEARN } = routes;\n\n\t\tconst list = this.getList()\n\t\tconst searchList = JSON.parse(localStorage.getItem(list))\n\t\tthis.setState({\n\t\t\tinitialSearchList: searchList,\n\t\t\tsearchList\n\t\t})\n\n\t\tif (search) {\n\t\t\tconst values = queryString.parse(search)\n\t\t\tif (pathName === SEARCH) {\n\t\t\t\tsetSearchType(values.searchtype)\n\t\t\t} else if (pathName === LEARN) {\n\t\t\t\tsetTempSearch(values.decksearch)\n\t\t\t}\n\t\t} \n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { urlSearchKey } = this.props;\n\t\tif (prevProps.urlSearchKey !== urlSearchKey) {\n\t\t\tthis.setState({tempSearchKey: urlSearchKey})\n\t\t}\n\t}\n\n\thandleSearchRoute = (e, route) => {\n\t\tconst { pathName, updateURL, userID } = this.props;\n\t\tconst { SEARCH, LOGIN } = routes;\n\t\te.target.blur();\n\t\tif (route === pathName) {\n\t\t\tupdateURL(SEARCH)\n\t\t} else {\n\t\t\tif (route !== SEARCH && !validateUser(userID)) {\n\t\t\t\trequestToLogin(()=>{\n\t\t\t\t\tsetPrevRoute(pathName)\n\t\t        \tupdateURL(LOGIN)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tupdateURL(route)\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSearch = (word) => {\n\t\tconst { updateURL, hash, searchType } = this.props;\n\t\tconst url = setQueryURL(word, searchType, hash)\n\t\tsessionStorage.setItem('searchURL', JSON.stringify(url));\n\t\tupdateURL(url)\n\t\tthis.updateSearchList(word);\n\t}\n\n\tsearchChange = (event) => {\n\t\tconst word = event.target.value\n\t\tlet { initialSearchList } = this.state;\n\t\tthis.setState({tempSearchKey: word})\n\t\tif (initialSearchList) {\n\t\t\tconst searchList = initialSearchList.filter(item => item.includes(word))\n\t\t\tthis.setState({searchList})\n\t\t}\n\t}\n\n\tsearchSubmit = (event) => {\n\t\tconst { pathName, updateURL, setSearchKey } = this.props;\n\t\tconst { tempSearchKey } = this.state;\n\t\tconst { SEARCH, LEARN } = routes;\n\t\tconst enterPressed = (event.which === 13);\n\t\tif (enterPressed) {\n\t\t\tevent.target.blur();\n\t\t\tif (tempSearchKey) {\n\t\t\t\tsetSearchKey(tempSearchKey)\n\t\t\t\tif (pathName === SEARCH) {\n\t\t\t\t\tthis.handleSearch(tempSearchKey)\n\t\t\t\t} else if (pathName === LEARN) {\n\t\t\t\t\tthis.handleDeckSearch(tempSearchKey)\n\t\t\t\t}\n\t\t\t} else if (pathName === LEARN) {\n\t\t\t\tupdateURL(pathName)\n\t\t\t}\n\t\t}\n\t}\n\n\thandleDeckSearch = (key) => {\n\t\tconst { pathName, updateURL } = this.props;\n\t\tupdateURL(`${pathName}?decksearch=${key}`)\n\t\tthis.updateSearchList(key);\n\t}\n\n\tgetList = () => {\n\t\tconst { pathName } = this.props;\n\t\tconst { SEARCH, LEARN } = routes;\n\t\tif (pathName === SEARCH) {\n\t\t\treturn 'searchList'\n\t\t} else if (pathName === LEARN) {\n\t\t\treturn 'deckList'\n\t\t}\n\t}\n\n\tupdateSearchList = (key) => {\n\t\tconst list = this.getList()\n\t\tlet searchList = JSON.parse(localStorage.getItem(list))\n\t\tif (searchList !== null) {\n\t\t\tsearchList.unshift(key)\n\t\t\tif (searchList.length > 15) {\n\t\t\t\tsearchList.pop()\n\t\t\t}\n\t\t\tlet i = searchList.length\n\t\t\twhile (i--) {\n\t\t\t\tif (searchList[i] === key && i !== 0) {\n\t\t\t\t\tsearchList.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tsearchList = [key]\n\t\t}\n\t\tthis.setState({\n\t\t\tsearchList,\n\t\t\tinitialSearchList: searchList,\n\t\t})\n\t\tlocalStorage.setItem(list, JSON.stringify(searchList))\n\t}\n\n\thandleNewDeck = (e) => {\n\t\tconst { updateURL, setPrevRoute, pathName, userID } = this.props;\n\t\tconst { NEW_DECK, LOGIN } = routes;\n\t\tif (!validateUser(userID)) {\n\t\t\trequestToLogin(()=>{\n\t\t\t\tsetPrevRoute(pathName)\n\t        \tupdateURL(LOGIN)\n\t\t\t})\n\t\t} else {\n\t\t\tupdateURL(`${NEW_DECK}#0`)\n\t\t}\n\t\te.target.blur();\n\t}\n\n\twordSelect = (word) => {\n\t\tconst { setTempSearch, pathName } = this.props;\n\t\tconst { SEARCH, LEARN, NEW_DECK } = routes;\n\t\tsetTempSearch(word)\n\t\t\n\t\tif (pathName === SEARCH) {\n\t\t\tthis.handleSearch(word)\n\t\t} else if (pathName === LEARN) {\n\t\t\tthis.handleDeckSearch(word)\n\t\t} else if (pathName === NEW_DECK) {\n\t\t\tsetSearchKey(word)\n\t\t}\n\t}\n\t\n\trender() {\n\t\tconst { \n\t\t\tpathName,\n\t\t\tsearchType,\n\t\t\tsetSearchType,\n\t\t\thideSearch\n\t\t } = this.props;\n\t\t const { searchList, tempSearchKey } = this.state;\n\t\t const { FAVORITES, RECENT, LEARN, SEARCH, NEW_DECK, EDIT_DECK } = routes;\n\t\t const searchOptions = ['All', 'Can', 'Eng', 'Man', 'Jyu'];\n\t\t const showSearch = pathName === SEARCH || pathName === NEW_DECK || pathName === EDIT_DECK;\n\t\t const isLearn = pathName === LEARN || pathName === NEW_DECK || pathName === EDIT_DECK;\n\t\treturn (\n\t\t\t<MediaQuery maxWidth={574}>\n\t\t\t\t{(matches) => {\n\t\t\t\treturn (\n\t\t\t\t\t<div className='search-bar-container'>\n\t\t\t\t\t\t<div className='search-bar'>\n\t\t\t\t\t\t\t{!isLearn &&\n\t\t\t\t\t\t\t\t<div className='filter-container'>\n\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\ttitle={matches ? null : 'Recent'}\n\t\t\t\t\t\t\t\t\t\ticon='time' \n\t\t\t\t\t\t\t\t\t\theight={matches ? '44px' : '34px'}\n\t\t\t\t\t\t\t\t\t\ticonSize={matches ? '22' : null}\n\t\t\t\t\t\t\t\t\t\tmargin='10px 5px 10px 10px'\n\t\t\t\t\t\t\t\t\t\tisSelected={pathName === RECENT\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: false}\n\t\t\t\t\t\t\t\t\t\thandleClick={e=>this.handleSearchRoute(e, RECENT)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\ttitle={matches ? null : 'Favorites'}\n\t\t\t\t\t\t\t\t\t\ticon='like-2' \n\t\t\t\t\t\t\t\t\t\theight={matches ? '44px' : '34px'}\n\t\t\t\t\t\t\t\t\t\ticonSize={matches ? '22' : null}\n\t\t\t\t\t\t\t\t\t\tmargin='10px 5px'\n\t\t\t\t\t\t\t\t\t\tisSelected={pathName === FAVORITES\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: false}\n\t\t\t\t\t\t\t\t\t\thandleClick={e=>this.handleSearchRoute(e, FAVORITES)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{pathName === LEARN &&\n\t\t\t\t\t\t\t\t<div className='filter-container'>\n\t\t\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\t\t\ttitle={matches ? null : 'New Deck'} \n\t\t\t\t\t\t\t\t\t\ticon='add' \n\t\t\t\t\t\t\t\t\t\theight={matches ? '44px' : '34px'}\n\t\t\t\t\t\t\t\t\t\ticonSize={matches ? '22' : null}\n\t\t\t\t\t\t\t\t\t\tmargin='10px 5px 10px 10px'\n\t\t\t\t\t\t\t\t\t\thandleClick={this.handleNewDeck}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<div className='search-container'>\n\t\t\t\t\t\t\t\t{showSearch && !hideSearch &&\n\t\t\t\t\t\t\t\t\t <Controller>\n\t\t\t\t\t\t\t\t\t\t<Trigger>\n\t\t\t\t\t\t\t\t\t\t\t<div className='center-div'>\n\t\t\t\t\t\t\t\t\t\t\t\t<TextInput  \n\t\t\t\t\t\t\t\t\t\t\t\t\tbutton={searchType}\n\t\t\t\t\t\t\t\t\t\t\t\t\tbuttonList={searchOptions}\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleDropDown={type=>setSearchType(type)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='English/Cantonese/Mandarin/Jyutping'\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='10px 0'\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={tempSearchKey ? tempSearchKey : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\theight={matches ? '44px' : '34px'} \n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding='2px 5px 2px 2px'\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange={this.searchChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={this.searchSubmit}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Trigger>\n\t\t\t\t\t\t\t\t\t\t<DropDown \n\t\t\t\t\t\t\t\t\t\t\tlist={searchList} \n\t\t\t\t\t\t\t\t\t\t\thandleSelection={this.wordSelect}\n\t\t\t\t\t\t\t\t\t\t\tadjustY={-5}\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight='200px'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Controller>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{pathName === LEARN && !hideSearch &&\n\t\t\t\t\t\t\t\t\t<Controller>\n\t\t\t\t\t\t\t\t\t\t<Trigger>\n\t\t\t\t\t\t\t\t\t\t\t<div className='center-div'>\n\t\t\t\t\t\t\t\t\t\t\t\t<TextInput \n\t\t\t\t\t\t\t\t\t\t\t\t\ticon='search'\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder='Search for other decks'\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin='10px 0'\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={tempSearchKey ? tempSearchKey : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\theight={matches ? '44px' : '34px'}\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange={this.searchChange}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonKeyPress={this.searchSubmit}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Trigger>\n\t\t\t\t\t\t\t\t\t\t<DropDown \n\t\t\t\t\t\t\t\t\t\t\tlist={searchList} \n\t\t\t\t\t\t\t\t\t\t\thandleSelection={this.wordSelect}\n\t\t\t\t\t\t\t\t\t\t\tadjustY={-5}\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight='200px'\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Controller>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}}\n\t\t\t</MediaQuery>\n\t\t);\n\t}\n\t\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);"]},"metadata":{},"sourceType":"module"}