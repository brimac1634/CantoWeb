{"ast":null,"code":"import _classCallCheck from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brianmacpherson/Desktop/cantotalkweb/src/pages/word-of-day/word-of-day.component.js\";\nimport React, { Component } from 'react';\nimport './word-of-day.styles.css';\nimport { connect } from 'react-redux';\nimport MediaQuery from 'react-responsive';\nimport apiRequest from '../../helpers/apiRequest';\nimport { yyyymmdd } from '../../helpers/helpers';\nimport EntryView from '../../components/entry-view/entry-view.component';\nimport SlideUpEntry from '../../components/slide-up-entry/slide-up-entry.component';\nimport Calendar from '../../components/calendar/calendar.component';\nimport { setMobileEntry as _setMobileEntry } from '../../redux/search/search.actions';\nimport { setLoading as _setLoading } from '../../redux/loading/loading.actions';\nimport { connectionError } from '../../helpers/helpers';\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    mobileSelectedEntry: state.search.mobileEntry,\n    hash: state.router.location.hash\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setMobileEntry: function setMobileEntry(entryID) {\n      return dispatch(_setMobileEntry(entryID));\n    },\n    setLoading: function setLoading(loading) {\n      return dispatch(_setLoading(loading));\n    }\n  };\n};\n\nvar WordOfTheDay =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WordOfTheDay, _Component);\n\n  function WordOfTheDay(props) {\n    var _this;\n\n    _classCallCheck(this, WordOfTheDay);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WordOfTheDay).call(this));\n\n    _this.handleSelect = function (entry) {\n      var setMobileEntry = _this.props.setMobileEntry;\n\n      _this.setState({\n        selectedEntry: entry ? entry : ''\n      });\n\n      setMobileEntry(entry ? entry.entry_id : '');\n    };\n\n    _this._isMounted = false;\n    _this.state = {\n      wods: [],\n      selectedEntry: {}\n    };\n    return _this;\n  }\n\n  _createClass(WordOfTheDay, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      this.getWordsOfDay();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      var setMobileEntry = this.props.setMobileEntry;\n      setMobileEntry('');\n    }\n  }, {\n    key: \"getWordsOfDay\",\n    value: function getWordsOfDay() {\n      var _this2 = this;\n\n      var setLoading = this.props.setLoading;\n      setLoading(true);\n      apiRequest({\n        endPoint: '/word-of-the-day'\n      }).then(function (entries) {\n        setLoading(false);\n\n        if (Array.isArray(entries)) {\n          var wods = {};\n          entries.forEach(function (entry) {\n            var date = yyyymmdd(entry.date);\n            wods[date] = entry;\n          });\n          _this2._isMounted && _this2.setState({\n            wods: wods,\n            selectedEntry: entries[0]\n          });\n        }\n      }).catch(function () {\n        setLoading(false);\n        connectionError();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          selectedEntry = _this$state.selectedEntry,\n          wods = _this$state.wods;\n      var mobileSelectedEntry = this.props.mobileSelectedEntry;\n      return React.createElement(\"div\", {\n        className: \"page word-of-day\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(MediaQuery, {\n        minWidth: 700,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"wod-split\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"half-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(Calendar, {\n        wods: wods,\n        selectEntry: this.handleSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"half-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(EntryView, {\n        selectedEntry: selectedEntry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })))), React.createElement(MediaQuery, {\n        maxWidth: 699,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"wod-split\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"half-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Calendar, {\n        wods: wods,\n        selectEntry: this.handleSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })), React.createElement(SlideUpEntry, {\n        isSelected: mobileSelectedEntry,\n        selectedEntry: selectedEntry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return WordOfTheDay;\n}(Component);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WordOfTheDay);","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/src/pages/word-of-day/word-of-day.component.js"],"names":["React","Component","connect","MediaQuery","apiRequest","yyyymmdd","EntryView","SlideUpEntry","Calendar","setMobileEntry","setLoading","connectionError","mapStateToProps","state","ownProps","mobileSelectedEntry","search","mobileEntry","hash","router","location","mapDispatchToProps","dispatch","entryID","loading","WordOfTheDay","props","handleSelect","entry","setState","selectedEntry","entry_id","_isMounted","wods","getWordsOfDay","endPoint","then","entries","Array","isArray","forEach","date","catch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './word-of-day.styles.css';\nimport { connect } from 'react-redux';\nimport MediaQuery from 'react-responsive';\nimport apiRequest from '../../helpers/apiRequest';\nimport { yyyymmdd } from '../../helpers/helpers';\nimport EntryView from '../../components/entry-view/entry-view.component';\nimport SlideUpEntry from '../../components/slide-up-entry/slide-up-entry.component';\nimport Calendar from '../../components/calendar/calendar.component';\nimport { setMobileEntry } from '../../redux/search/search.actions';\nimport { setLoading } from '../../redux/loading/loading.actions';\nimport { connectionError } from '../../helpers/helpers';\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    mobileSelectedEntry: state.search.mobileEntry,\n    hash: state.router.location.hash,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tsetMobileEntry: (entryID) => dispatch(setMobileEntry(entryID)),\n\t\tsetLoading: (loading) => dispatch(setLoading(loading)),\n\t}\n} \n\nclass WordOfTheDay extends Component {\n\tconstructor(props) {\n\t\tsuper()\n\t\tthis._isMounted = false;\n\t\tthis.state = {\n\t\t\twods: [],\n\t\t\tselectedEntry: {}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis._isMounted = true;\n\t\tthis.getWordsOfDay()\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis._isMounted = false;\n\t\tconst {setMobileEntry} = this.props;\n\t    setMobileEntry('');\n\t}\n\n\tgetWordsOfDay() {\n\t\tconst { setLoading } = this.props;\n\t\tsetLoading(true)\n\t\tapiRequest({\n\t\t\tendPoint: '/word-of-the-day'\n\t\t})\n\t\t.then(entries => {\n\t\t\tsetLoading(false)\n\t\t\tif (Array.isArray(entries)) {\n\t\t\t\tlet wods = {}\n\t\t\t\tentries.forEach(entry => {\n\t\t\t\t\tconst date = yyyymmdd(entry.date)\n\t\t\t\t\twods[date] = entry\n\t\t\t\t})\n\t\t\t\tthis._isMounted && this.setState({\n\t\t\t\t\twods,\n\t\t\t\t\tselectedEntry: entries[0]\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t\t.catch(()=>{\n\t\t\tsetLoading(false)\n\t\t\tconnectionError()\n\t\t})\n\t}\n\n\thandleSelect = (entry) => {\n\t\tconst { setMobileEntry } = this.props;\n\t\tthis.setState({selectedEntry: entry ? entry : ''})\n\t\tsetMobileEntry(entry ? entry.entry_id : '');\n\t}\n\n\trender() {\n\t\tconst { selectedEntry, wods } = this.state;\n\t\tconst { mobileSelectedEntry } = this.props;\n\n\t\treturn (\n\t\t\t<div className='page word-of-day'>\n\t\t\t\t<MediaQuery minWidth={700}>\n\t\t\t\t\t<div className='wod-split'>\n\t\t\t\t\t\t<div className='half-container'>\n\t\t\t\t\t\t\t<Calendar \n\t\t\t\t\t\t\t\twods={wods} \n\t\t\t\t\t\t\t\tselectEntry={this.handleSelect}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='half-container'>\n\t\t\t\t\t\t\t<EntryView \n\t\t\t\t\t\t\t\tselectedEntry={selectedEntry} \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</MediaQuery>\n\t\t\t\t<MediaQuery maxWidth={699}>\n\t\t\t\t\t<div className='wod-split'>\n\t\t\t\t\t\t<div className='half-container'>\n\t\t\t\t\t\t\t<Calendar \n\t\t\t\t\t\t\t\twods={wods} \n\t\t\t\t\t\t\t\tselectEntry={this.handleSelect}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<SlideUpEntry  \n\t\t\t\t\t\t\tisSelected={mobileSelectedEntry} \n\t\t\t\t\t\t\tselectedEntry={selectedEntry}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</MediaQuery>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WordOfTheDay);"]},"metadata":{},"sourceType":"module"}