{"ast":null,"code":"import _classCallCheck from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brianmacpherson/Desktop/cantotalkweb/src/App.js\";\nimport React, { Component } from 'react';\nimport Cookies from 'universal-cookie';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport { SwapSpinner } from \"react-spinners-kit\";\nimport Logo from './components/logo/logo.component';\nimport TitleBar from './components/title-bar/title-bar.component';\nimport MainView from './components/main-view/main-view.component';\nimport PopUpAlert from './components/pop-up-alert/pop-up-alert.component';\nimport { setUser } from './redux/sign-in/sign-in.actions';\nimport apiRequest from './helpers/apiRequest';\nimport { routes } from './redux/routing/routing.constants';\nimport { deleteToken } from './helpers/helpers';\nimport './App.scss';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    loading: state.loading.loading\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateURL: function updateURL(path) {\n      return dispatch(push(path));\n    },\n    updateUser: function updateUser(user) {\n      return dispatch(setUser(user));\n    }\n  };\n};\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.completeLoading = function () {\n      _this.setState({\n        loadingHasFinished: true,\n        initialLoading: false\n      });\n    };\n\n    _this.state = {\n      loadingHasFinished: false,\n      initialLoading: true\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          updateURL = _this$props.updateURL,\n          updateUser = _this$props.updateUser;\n      var LOGIN = routes.LOGIN;\n      var cookies = new Cookies();\n      var token = cookies.get('authToken');\n\n      if (token) {\n        apiRequest({\n          endPoint: '/',\n          method: 'GET'\n        }).then(function (user) {\n          if (user && user.error) {\n            deleteToken();\n            updateURL(LOGIN);\n          } else {\n            updateUser(user);\n          }\n\n          _this2.completeLoading();\n        }).catch(function () {\n          _this2.completeLoading();\n        });\n      } else {\n        this.completeLoading();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var loading = this.props.loading;\n      var _this$state = this.state,\n          loadingHasFinished = _this$state.loadingHasFinished,\n          initialLoading = _this$state.initialLoading;\n      return React.createElement(\"div\", {\n        className: \"app\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, loadingHasFinished && React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(MainView, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }), React.createElement(TitleBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }), React.createElement(PopUpAlert, {\n        title: alert.title,\n        message: alert.message,\n        showAlert: alert.showAlert,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), initialLoading && React.createElement(\"div\", {\n        className: \"loader vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(Logo, {\n        iconSize: \"100px\",\n        margin: \"20px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }), React.createElement(SwapSpinner, {\n        size: 60,\n        color: \"#ff7a8a\",\n        loading: initialLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      })), loading && React.createElement(\"div\", {\n        className: \"loader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(SwapSpinner, {\n        size: 60,\n        color: \"#ff7a8a\",\n        loading: loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/src/App.js"],"names":["React","Component","Cookies","connect","push","SwapSpinner","Logo","TitleBar","MainView","PopUpAlert","setUser","apiRequest","routes","deleteToken","mapStateToProps","state","loading","mapDispatchToProps","dispatch","updateURL","path","updateUser","user","App","props","completeLoading","setState","loadingHasFinished","initialLoading","LOGIN","cookies","token","get","endPoint","method","then","error","catch","alert","title","message","showAlert"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport Cookies from 'universal-cookie';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport { SwapSpinner } from \"react-spinners-kit\";\nimport Logo from './components/logo/logo.component';\nimport TitleBar from './components/title-bar/title-bar.component';\nimport MainView from './components/main-view/main-view.component';\nimport PopUpAlert from './components/pop-up-alert/pop-up-alert.component';\nimport { setUser } from './redux/sign-in/sign-in.actions';\nimport apiRequest from './helpers/apiRequest';\nimport { routes } from './redux/routing/routing.constants';\nimport { deleteToken } from './helpers/helpers';\n\nimport './App.scss';\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.loading.loading,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updateURL: (path) => dispatch(push(path)),\n    updateUser: (user) => dispatch(setUser(user)),\n  }\n}\n\nclass App extends Component {\n  constructor (props) {\n  \tsuper();\n    this.state = {\n      loadingHasFinished: false,\n      initialLoading: true\n    }\n  }  \n\n  componentDidMount() {\n    const { updateURL, updateUser } = this.props;\n    const { LOGIN } = routes;\n    const cookies = new Cookies();\n    const token = cookies.get('authToken')\n    if (token) {\n      apiRequest({\n        endPoint: '/',\n        method: 'GET',\n      })\n      .then(user => {\n        if (user && user.error) {\n          deleteToken()\n          updateURL(LOGIN)\n        } else {\n          updateUser(user);\n        }\n        this.completeLoading()\n      })\n      .catch(()=>{\n        this.completeLoading()\n      })\n    } else {\n      this.completeLoading()\n    }\n  }\n\n  completeLoading = () => {\n    this.setState({\n      loadingHasFinished: true,\n      initialLoading: false\n    })\n  }\n\n  render() {\n    const { loading } = this.props;\n    const { loadingHasFinished, initialLoading } = this.state;\n    return (\n      <div className='app'>\n        {\n          loadingHasFinished &&\n            <span>\n              <MainView />\n              <TitleBar />\n              <PopUpAlert \n                title={alert.title} \n                message={alert.message} \n                showAlert={alert.showAlert}\n              />\n            </span>\n        }\n        {\n          initialLoading &&\n            <div className='loader vertical'>\n              <Logo iconSize='100px' margin='20px'/>\n              <SwapSpinner\n                size={60}\n                color='#ff7a8a'\n                loading={initialLoading}\n              />\n            </div>\n        }\n        {\n          loading &&\n            <div className='loader'>\n              <SwapSpinner\n                size={60}\n                color='#ff7a8a'\n                loading={loading}\n              />\n            </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}