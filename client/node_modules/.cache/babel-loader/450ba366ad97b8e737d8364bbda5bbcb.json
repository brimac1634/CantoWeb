{"ast":null,"code":"import _classCallCheck from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brianmacpherson/Desktop/cantotalkweb/src/pages/sign-in/sign-in.component.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport { Link } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport FacebookLogin from 'react-facebook-login';\nimport queryString from 'query-string';\nimport MediaQuery from 'react-responsive';\nimport { optionAlert } from '../../components/option-alert/option-alert.component';\nimport Button from '../../components/button/button.component';\nimport TextInput from '../../components/text-input/text-input.component';\nimport apiRequest from '../../helpers/apiRequest';\nimport { serverError, connectionError, validateEmail } from '../../helpers/helpers';\nimport { routes } from '../../redux/routing/routing.constants';\nimport { setUser } from '../../redux/sign-in/sign-in.actions';\nimport { setLoading as _setLoading } from '../../redux/loading/loading.actions';\nimport { setAlert } from '../../redux/pop-up-alert/pop-up-alert.actions';\nimport config from '../../config.json';\nimport './sign-in.styles.scss';\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    pathName: state.router.location.pathname,\n    search: state.router.location.search,\n    prevPath: state.prevRoute.route\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateUser: function updateUser(user) {\n      return dispatch(setUser(user));\n    },\n    updateURL: function updateURL(path) {\n      return dispatch(push(path));\n    },\n    presentAlert: function presentAlert(alert) {\n      return dispatch(setAlert(alert));\n    },\n    setLoading: function setLoading(loading) {\n      return dispatch(_setLoading(loading));\n    }\n  };\n};\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SignIn, _Component);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignIn).call(this, props));\n\n    _this.signInToggle = function (type) {\n      var updateURL = _this.props.updateURL;\n      var LOGIN = routes.LOGIN,\n          REGISTER = routes.REGISTER;\n\n      if (type === 'Sign In') {\n        updateURL(LOGIN);\n      } else if (type === 'Register') {\n        updateURL(REGISTER);\n      }\n    };\n\n    _this.onInputChange = function (event) {\n      var state = _this.state;\n      var id = event.target.id;\n      var value = event.target.value;\n      state[id] = value;\n\n      _this.setState(state);\n    };\n\n    _this.validatePassword = function (password) {\n      return password.length >= 6 ? true : false;\n    };\n\n    _this.createUser = function (userData) {\n      var name = userData.name,\n          id = userData.id,\n          email = userData.email;\n      return {\n        userName: name,\n        userID: id,\n        userEmail: email\n      };\n    };\n\n    _this.askToRegister = function (title, message) {\n      optionAlert({\n        title: title,\n        message: \"\".concat(message, \" Would you like to register now?\"),\n        buttons: [{\n          label: 'Yes',\n          onClick: function onClick() {\n            return _this.signInToggle('Register');\n          }\n        }, {\n          label: 'No',\n          onClick: function onClick() {\n            return null;\n          }\n        }]\n      });\n    };\n\n    _this.onUserSubmit = function () {\n      var _this$state = _this.state,\n          title = _this$state.title,\n          email = _this$state.email,\n          password = _this$state.password,\n          failCount = _this$state.failCount;\n      var _this$props = _this.props,\n          setLoading = _this$props.setLoading,\n          updateURL = _this$props.updateURL;\n      var RESET = routes.RESET;\n      var emailIsValid = validateEmail(email);\n\n      var passwordIsValid = _this.validatePassword(password);\n\n      if (!emailIsValid) {\n        _this.emailIsNotCorrect();\n      } else {\n        if (title === 'Login') {\n          if (!passwordIsValid) {\n            _this.passwordIsIncomplete();\n          } else {\n            //login\n            setLoading(true);\n            apiRequest({\n              endPoint: '/signin',\n              method: 'POST',\n              body: {\n                email: email,\n                password: password\n              }\n            }).then(function (resData) {\n              setLoading(false);\n\n              if (resData && resData.error != null) {\n                var _resData$error = resData.error,\n                    name = _resData$error.name,\n                    _title = _resData$error.title,\n                    message = _resData$error.message;\n\n                if (name === 'ServerError') {\n                  serverError();\n                } else if (name === 'EmailNotRegistered') {\n                  _this.askToRegister(_title, message);\n                } else if (name === 'RegistrationIncomplete') {\n                  _this.askToRegister(_title, message);\n                } else if (name === 'ValidationError') {\n                  _this.setState({\n                    failCount: failCount + 1\n                  });\n\n                  if (failCount <= 2) {\n                    optionAlert({\n                      title: _title,\n                      message: message\n                    });\n                  } else {\n                    _this.setState({\n                      failCount: 0\n                    });\n\n                    optionAlert({\n                      title: 'Invalid Credentials',\n                      message: 'The information you have entered does not match our records. Would you like to reset your password?',\n                      buttons: [{\n                        label: 'Yes',\n                        onClick: function onClick() {\n                          return updateURL(RESET);\n                        }\n                      }, {\n                        label: 'No',\n                        onClick: null\n                      }]\n                    });\n                  }\n                }\n              } else {\n                _this.handleLogin(resData);\n              }\n            }).catch(function () {\n              setLoading(false);\n              connectionError();\n            });\n          }\n        } else {\n          _this.handleVerification(email);\n        }\n      }\n    };\n\n    _this.handleLogin = function (resData) {\n      var _this$props2 = _this.props,\n          presentAlert = _this$props2.presentAlert,\n          updateURL = _this$props2.updateURL,\n          updateUser = _this$props2.updateUser,\n          prevPath = _this$props2.prevPath;\n      var SEARCH = routes.SEARCH,\n          LOGIN = routes.LOGIN,\n          REGISTER = routes.REGISTER,\n          VERIFY = routes.VERIFY;\n\n      var user = _this.createUser(resData.user);\n\n      var alert = {\n        title: 'Login Successful',\n        message: \"You are now logged in as \".concat(user.userName, \".\"),\n        showAlert: true\n      };\n      var cookies = new Cookies();\n      cookies.set('authToken', resData.token, {\n        path: '/'\n      });\n      updateUser(user);\n      presentAlert(alert);\n\n      if (prevPath) {\n        var changePath = prevPath === LOGIN || prevPath === REGISTER || prevPath === VERIFY;\n        updateURL(changePath ? SEARCH : prevPath);\n      } else {\n        updateURL(SEARCH);\n      }\n    };\n\n    _this.onVerifyEmail = function () {\n      var _this$state2 = _this.state,\n          token = _this$state2.token,\n          password = _this$state2.password,\n          password2 = _this$state2.password2;\n      var _this$props3 = _this.props,\n          setLoading = _this$props3.setLoading,\n          updateURL = _this$props3.updateURL;\n      var RESET = routes.RESET;\n\n      var passwordIsValid = _this.validatePassword(password);\n\n      if (passwordIsValid && password === password2) {\n        setLoading(true);\n        apiRequest({\n          endPoint: '/register/complete',\n          method: 'POST',\n          body: {\n            password: password,\n            token: token\n          }\n        }).then(function (resData) {\n          setLoading(false);\n\n          if (resData && resData.error != null) {\n            var _resData$error2 = resData.error,\n                name = _resData$error2.name,\n                title = _resData$error2.title,\n                message = _resData$error2.message;\n\n            if (name === 'PasswordTokenExpired') {\n              optionAlert({\n                title: title,\n                message: \"\".concat(message, \" Would you like to reset your password now?\"),\n                buttons: [{\n                  label: 'Yes',\n                  onClick: function onClick() {\n                    return updateURL(RESET);\n                  }\n                }, {\n                  label: 'No',\n                  onClick: null\n                }]\n              });\n            } else if (name === 'UserNotFound') {\n              _this.askToRegister({\n                title: title,\n                message: \"\".concat(message, \" Would you like to register now?\")\n              });\n            }\n          } else {\n            _this.handleLogin(resData);\n          }\n        }).catch(function () {\n          setLoading(false);\n          connectionError();\n        });\n      } else if (!passwordIsValid) {\n        _this.passwordIsIncomplete();\n      } else if (password !== password2) {\n        optionAlert({\n          title: 'Passwords Do Not Match',\n          message: 'Please ensure that both passwords are matching.'\n        });\n      }\n    };\n\n    _this.handleVerification = function (email) {\n      var _this$state3 = _this.state,\n          name = _this$state3.name,\n          didAgree = _this$state3.didAgree;\n      var setLoading = _this.props.setLoading;\n\n      if (!/\\S/.test(name)) {\n        optionAlert({\n          title: 'Provide your name',\n          message: \"You must provide your full name in order to proceed with regsitration.\"\n        });\n      } else if (!didAgree) {\n        optionAlert({\n          title: 'Privacy Policy',\n          message: \"Please click the checkbox next to the privacy agreement in order to proceed with registration.\"\n        });\n      } else {\n        var body = {\n          name: name,\n          email: email\n        };\n        setLoading(true);\n        apiRequest({\n          endPoint: '/register',\n          method: 'POST',\n          body: body\n        }).then(function (userData) {\n          setLoading(false);\n\n          if (userData && userData.error != null) {\n            var _userData$error = userData.error,\n                title = _userData$error.title,\n                message = _userData$error.message;\n            optionAlert({\n              title: title,\n              message: message\n            });\n          } else {\n            optionAlert({\n              title: 'Verification Email Sent',\n              message: \"Please check your email (\".concat(userData.email, \") for a verification email. If you don't see the email shortly, check your spam folder.\")\n            });\n          }\n        }).catch(function (err) {\n          setLoading(false);\n          connectionError();\n        });\n      }\n    };\n\n    _this.onResetPassword = function (email) {\n      if (validateEmail(email)) {\n        _this.handleVerification(email);\n      } else {\n        _this.emailIsNotCorrect();\n      }\n    };\n\n    _this.passwordIsIncomplete = function () {\n      optionAlert({\n        title: 'Invalid Password',\n        message: 'The password you have entered is incomplete. Please note that passwords must contain at least 6 characters.'\n      });\n    };\n\n    _this.emailIsNotCorrect = function () {\n      optionAlert({\n        title: 'Invalid Email Address',\n        message: 'The email address you have entered is incomplete.'\n      });\n    };\n\n    _this.responseFacebook = function (response) {\n      var setLoading = _this.props.setLoading;\n\n      if (response && response.email) {\n        var accessToken = response.accessToken,\n            id = response.id,\n            email = response.email,\n            name = response.name;\n        setLoading(true);\n        apiRequest({\n          endPoint: '/api/v1/auth/facebook',\n          method: 'POST',\n          body: {\n            accessToken: accessToken,\n            id: id,\n            email: email,\n            name: name\n          }\n        }).then(function (userData) {\n          if (userData && userData.error != null) {\n            var _userData$error2 = userData.error,\n                title = _userData$error2.title,\n                message = _userData$error2.message;\n            optionAlert({\n              title: title,\n              message: message\n            });\n          } else {\n            _this.handleLogin(userData);\n          }\n\n          setLoading(false);\n        }).catch(function (err) {\n          setLoading(false);\n          connectionError();\n        });\n      } else {\n        optionAlert({\n          title: 'Facebook Error',\n          message: 'There was an error logging in using Facebook. Please ensure that you are signed in to FaceBook.'\n        });\n      }\n    };\n\n    _this.handleAgree = function () {\n      _this.setState({\n        didAgree: !_this.state.didAgree\n      });\n    };\n\n    _this.renderPassword = function (margin) {\n      var password = _this.state.password;\n      return React.createElement(TextInput, {\n        icon: \"locked-4\",\n        margin: margin,\n        placeholder: \"Password\",\n        value: password,\n        type: \"password\",\n        id: \"password\",\n        handleChange: _this.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 382\n        },\n        __self: this\n      });\n    };\n\n    _this.renderEmail = function () {\n      var email = _this.state.email;\n      return React.createElement(TextInput, {\n        icon: \"user-3\",\n        margin: \"20px 0\",\n        placeholder: \"Email Address\",\n        value: email,\n        id: \"email\",\n        name: \"email\",\n        type: \"text\",\n        handleChange: _this.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397\n        },\n        __self: this\n      });\n    };\n\n    _this.renderComponent = function (pathName) {\n      var _this$state4 = _this.state,\n          title = _this$state4.title,\n          email = _this$state4.email,\n          name = _this$state4.name,\n          password2 = _this$state4.password2,\n          signInButton = _this$state4.signInButton,\n          alternateButton = _this$state4.alternateButton,\n          didAgree = _this$state4.didAgree;\n      var LOGIN = routes.LOGIN,\n          REGISTER = routes.REGISTER,\n          VERIFY = routes.VERIFY,\n          RESET = routes.RESET,\n          PRIVACY = routes.PRIVACY;\n      var updateURL = _this.props.updateURL;\n\n      if (pathName === RESET || pathName === VERIFY) {\n        var heading = pathName === RESET ? 'Reset Account' : 'Set Password';\n        var line = pathName === RESET ? 'We will email you a link to reset your password.' : 'Please put your new password in both fields below.';\n        return React.createElement(\"div\", {\n          className: \"sign-in-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 418\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"panel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 419\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"heading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420\n          },\n          __self: this\n        }, heading), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 421\n          },\n          __self: this\n        }, line), pathName === RESET && _this.renderEmail(), pathName === VERIFY && React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 424\n          },\n          __self: this\n        }, _this.renderPassword('20px 0 0 0'), React.createElement(TextInput, {\n          icon: \"locked-4\",\n          margin: \"20px 0\",\n          placeholder: \"Retype Password\",\n          value: password2,\n          type: \"password\",\n          id: \"password2\",\n          handleChange: _this.onInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 426\n          },\n          __self: this\n        })), React.createElement(Button, {\n          buttonType: \"ghost\",\n          title: \"Continue\",\n          margin: \"0 0 30px 0\",\n          handleClick: pathName === VERIFY ? function () {\n            return _this.onVerifyEmail();\n          } : function () {\n            return _this.onResetPassword(email);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 437\n          },\n          __self: this\n        })));\n      } else if (pathName === LOGIN || pathName === REGISTER) {\n        var first = pathName === LOGIN ? 'Welcome Back,' : 'Welcome to CantoTalk!';\n        var second = pathName === LOGIN ? 'we\\'re happy to see you!' : 'But Why Register?';\n        var message = pathName === LOGIN ? 'Don\\'t forget to use your CantoTalk profile to its fullest by keeping track of learned words and practicing with the flash card decks!' : 'Creating a profile allows you to keep track of your previous searches, save favorites, build your own flash card decks, and more! This will also make it possible to sync information between devices. ';\n        var buttonDisabled = signInButton === 'Register' ? !didAgree || !name || !email : false;\n        return React.createElement(\"div\", {\n          className: \"sign-in-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 459\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"panel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 460\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"heading-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 461\n          },\n          __self: this\n        }, React.createElement(MediaQuery, {\n          minWidth: 361,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 462\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"heading pink\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 463\n          },\n          __self: this\n        }, first), React.createElement(\"h1\", {\n          className: \"heading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464\n          },\n          __self: this\n        }, second)), React.createElement(MediaQuery, {\n          maxWidth: 360,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 466\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"heading pink\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 467\n          },\n          __self: this\n        }, first), React.createElement(\"h2\", {\n          className: \"heading\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 468\n          },\n          __self: this\n        }, second))), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 471\n          },\n          __self: this\n        }, message)), React.createElement(\"form\", {\n          className: \"panel\",\n          autoComplete: \"on\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 473\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"right-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 474\n          },\n          __self: this\n        }, title), pathName === REGISTER && React.createElement(TextInput, {\n          icon: \"user-3\",\n          margin: \"0\",\n          placeholder: \"Full Name\",\n          value: name,\n          id: \"name\",\n          name: \"name\",\n          type: \"text\",\n          handleChange: _this.onInputChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 476\n          },\n          __self: this\n        }), _this.renderEmail(), pathName === LOGIN && _this.renderPassword('0 0 20px 0'), pathName === REGISTER && React.createElement(\"div\", {\n          className: \"agree-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 490\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"checkbox\",\n          id: \"checkbox\",\n          type: \"checkbox\",\n          onChange: _this.handleAgree,\n          defaultChecked: didAgree,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 491\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          className: \"checkbox-label\",\n          htmlFor: \"checkbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 498\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          className: \"mini\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 502\n          },\n          __self: this\n        }, \"I agree to the \", React.createElement(Link, {\n          to: PRIVACY,\n          target: \"_blank\",\n          className: \"mini\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 502\n          },\n          __self: this\n        }, \"privacy policy\"))), React.createElement(\"div\", {\n          className: \"button-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 505\n          },\n          __self: this\n        }, React.createElement(Button, {\n          title: signInButton,\n          margin: \"10px 20px 10px 0\",\n          isDisabled: buttonDisabled,\n          handleClick: _this.onUserSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 506\n          },\n          __self: this\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 512\n          },\n          __self: this\n        }, \"or\"), React.createElement(FacebookLogin, {\n          appId: config.FACEBOOK_APP_ID,\n          fields: \"name,email,picture\",\n          cssClass: \"custom-fb-button\",\n          callback: _this.responseFacebook,\n          disableMobileRedirect: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 513\n          },\n          __self: this\n        })), pathName === LOGIN && React.createElement(\"div\", {\n          className: \"bottom-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 522\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"mini button\",\n          onClick: function onClick() {\n            return updateURL(RESET);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 523\n          },\n          __self: this\n        }, \"Forgot Password\")), React.createElement(\"div\", {\n          className: \"bottom-row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 529\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          className: \"mini\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 530\n          },\n          __self: this\n        }, pathName === LOGIN ? 'New to CantoTalk?' : 'Already Registered?'), React.createElement(\"p\", {\n          className: \"mini button\",\n          onClick: function onClick() {\n            return _this.signInToggle(alternateButton);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 536\n          },\n          __self: this\n        }, alternateButton))));\n      }\n    };\n\n    _this.state = {\n      title: 'Login',\n      signInButton: 'Sign In',\n      alternateButton: 'register',\n      token: '',\n      name: '',\n      email: '',\n      password: '',\n      password2: '',\n      failCount: 0,\n      didAgree: false\n    };\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var LOGIN = routes.LOGIN,\n          REGISTER = routes.REGISTER,\n          VERIFY = routes.VERIFY;\n      var _this$props4 = this.props,\n          pathName = _this$props4.pathName,\n          search = _this$props4.search;\n\n      if (pathName === LOGIN) {\n        this.setState({\n          title: 'Login',\n          signInButton: 'Sign In',\n          alternateButton: 'Register'\n        });\n      } else if (pathName === REGISTER) {\n        this.setState({\n          title: 'Register',\n          signInButton: 'Register',\n          alternateButton: 'Sign In'\n        });\n      } else if (pathName === VERIFY) {\n        var _queryString$parse = queryString.parse(search),\n            token = _queryString$parse.token;\n\n        this.setState({\n          token: token\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var pathName = this.props.pathName;\n      return React.createElement(\"div\", {\n        className: \"sign-in-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 553\n        },\n        __self: this\n      }, this.renderComponent(pathName));\n    }\n  }]);\n\n  return SignIn;\n}(Component);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/src/pages/sign-in/sign-in.component.js"],"names":["React","Component","connect","push","Link","Cookies","FacebookLogin","queryString","MediaQuery","optionAlert","Button","TextInput","apiRequest","serverError","connectionError","validateEmail","routes","setUser","setLoading","setAlert","config","mapStateToProps","state","pathName","router","location","pathname","search","prevPath","prevRoute","route","mapDispatchToProps","dispatch","updateUser","user","updateURL","path","presentAlert","alert","loading","SignIn","props","signInToggle","type","LOGIN","REGISTER","onInputChange","event","id","target","value","setState","validatePassword","password","length","createUser","userData","name","email","userName","userID","userEmail","askToRegister","title","message","buttons","label","onClick","onUserSubmit","failCount","RESET","emailIsValid","passwordIsValid","emailIsNotCorrect","passwordIsIncomplete","endPoint","method","body","then","resData","error","handleLogin","catch","handleVerification","SEARCH","VERIFY","showAlert","cookies","set","token","changePath","onVerifyEmail","password2","didAgree","test","err","onResetPassword","responseFacebook","response","accessToken","handleAgree","renderPassword","margin","renderEmail","renderComponent","signInButton","alternateButton","PRIVACY","heading","line","first","second","buttonDisabled","FACEBOOK_APP_ID","parse"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router'\nimport { Link } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport FacebookLogin from 'react-facebook-login';\nimport queryString from 'query-string';\nimport MediaQuery from 'react-responsive';\n\nimport { optionAlert } from '../../components/option-alert/option-alert.component';\nimport Button from '../../components/button/button.component';\nimport TextInput from '../../components/text-input/text-input.component';\n\nimport apiRequest from '../../helpers/apiRequest';\nimport { serverError, connectionError, validateEmail } from '../../helpers/helpers';\nimport { routes } from '../../redux/routing/routing.constants';\n\nimport { setUser } from '../../redux/sign-in/sign-in.actions';\nimport { setLoading } from '../../redux/loading/loading.actions';\nimport { setAlert } from '../../redux/pop-up-alert/pop-up-alert.actions';\nimport config from '../../config.json';\n\nimport './sign-in.styles.scss';\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tpathName: state.router.location.pathname,\n\t\tsearch: state.router.location.search,\n\t\tprevPath: state.prevRoute.route,\n\t}\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tupdateUser: (user) => dispatch(setUser(user)),\n\t\tupdateURL: (path) => dispatch(push(path)),\n\t\tpresentAlert: (alert) => dispatch(setAlert(alert)),\n\t\tsetLoading: (loading) => dispatch(setLoading(loading)),\n\t}\n}\n\nclass SignIn extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\ttitle: 'Login',\n\t\t\tsignInButton: 'Sign In',\n\t\t\talternateButton: 'register',\n\t\t\ttoken: '',\n\t\t\tname: '',\n\t\t\temail: '',\n\t\t\tpassword: '',\n\t\t\tpassword2: '',\n\t\t\tfailCount: 0,\n\t\t\tdidAgree: false,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { LOGIN, REGISTER, VERIFY } = routes;\n\t\tconst { pathName, search } = this.props;\n\t\tif (pathName === LOGIN) {\n\t\t\tthis.setState({\n\t\t\t\ttitle: 'Login',\n\t\t\t\tsignInButton: 'Sign In',\n\t\t\t\talternateButton: 'Register',\n\t\t\t})\n\t\t} else if (pathName === REGISTER) {\n\t\t\tthis.setState({\n\t\t\t\ttitle: 'Register',\n\t\t\t\tsignInButton: 'Register',\n\t\t\t\talternateButton: 'Sign In',\n\t\t\t})\n\t\t} else if (pathName === VERIFY) {\n\t\t\tconst { token } = queryString.parse(search)\n\t\t\tthis.setState({ token })\n\t\t}\n\t\t\n\t}\n\n\n\tsignInToggle = (type) => {\n\t\tconst { updateURL } = this.props;\n\t\tconst { LOGIN, REGISTER } = routes;\n\t\tif (type === 'Sign In') {\n\t\t\tupdateURL(LOGIN)\n\t\t} else if (type === 'Register') {\n\t\t\tupdateURL(REGISTER)\n\t\t}\n\t}\n\n\tonInputChange = (event) => {\n\t\tconst state = this.state\n\t\tconst { id } = event.target\n\t    const { value } = event.target\n\t    state[id] = value\n\t\tthis.setState(state)\n\t}\n\n\tvalidatePassword = (password) => {\n\t\treturn password.length >= 6 ? true : false;\n\t}\n\n\tcreateUser = (userData) => {\n\t\tconst { name, id, email } = userData;\n\t\treturn {\n\t\t\tuserName: name,\n\t\t\tuserID: id,\n\t\t\tuserEmail: email,\n\t\t}\n\t}\n\n\taskToRegister = (title, message) => {\n\t\toptionAlert({\n\t\t    title: title,\n\t\t    message: `${message} Would you like to register now?`,\n\t\t    buttons: [\n\t\t    \t{\n\t\t    \t\tlabel: 'Yes',\n\t\t\t        onClick: () => this.signInToggle('Register')\n\t\t    \t},\n\t\t    \t{\n\t\t    \t\tlabel: 'No',\n\t\t\t        onClick: () => null\n\t\t    \t},\n\t\t    ]\n\t    })\n\t}\n\n\tonUserSubmit = () => {\n\t\tconst { title, email, password, failCount } = this.state;\n\t\tconst { setLoading, updateURL } = this.props;\n\t\tconst { RESET } = routes;\n\t\tconst emailIsValid = validateEmail(email);\n\t\tconst passwordIsValid = this.validatePassword(password);\n\t\tif (!emailIsValid) {\n\t\t\tthis.emailIsNotCorrect()\n\t\t} else {\n\t\t\tif (title === 'Login') {\n\t\t\t\tif (!passwordIsValid) {\n\t\t\t\t\tthis.passwordIsIncomplete()\n\t\t\t\t} else {\n\t\t\t\t\t//login\n\t\t\t\t\tsetLoading(true)\n\t\t\t\t\tapiRequest({\n\t\t\t\t\t\tendPoint: '/signin',\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\tbody: {email, password} \n\t\t\t\t\t})\n\t\t\t\t\t\t.then(resData => {\n\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t\tif (resData && resData.error != null) {\n\t\t\t\t\t\t\t\tconst { name, title, message } = resData.error;\n\t\t\t\t\t\t\t\tif (name === 'ServerError') {\n\t\t\t\t\t\t\t\t\tserverError()\n\t\t\t\t\t\t\t\t} else if (name === 'EmailNotRegistered') {\n\t\t\t\t\t\t\t\t\tthis.askToRegister(title, message)\n\t\t\t\t\t\t\t\t} else if (name === 'RegistrationIncomplete') {\n\t\t\t\t\t\t\t\t\tthis.askToRegister(title, message)\n\t\t\t\t\t\t\t\t} else if (name === 'ValidationError') {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tfailCount: failCount + 1\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tif (failCount <= 2) {\n\t\t\t\t\t\t\t\t\t\toptionAlert({title, message})\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tthis.setState({failCount: 0})\n\t\t\t\t\t\t\t\t\t\toptionAlert({\n\t\t\t\t\t\t\t\t\t\t    title: 'Invalid Credentials',\n\t\t\t\t\t\t\t\t\t\t    message: 'The information you have entered does not match our records. Would you like to reset your password?',\n\t\t\t\t\t\t\t\t\t\t    buttons: [\n\t\t\t\t\t\t\t\t\t\t      {\n\t\t\t\t\t\t\t\t\t\t        label: 'Yes',\n\t\t\t\t\t\t\t\t\t\t        onClick: ()=>updateURL(RESET)\n\t\t\t\t\t\t\t\t\t\t      },\n\t\t\t\t\t\t\t\t\t\t      { \n\t\t\t\t\t\t\t\t\t\t        label: 'No',\n\t\t\t\t\t\t\t\t\t\t        onClick: null\n\t\t\t\t\t\t\t\t\t\t      }\n\t\t\t\t\t\t\t\t\t\t    ]\n\t\t\t\t\t\t\t\t\t    })\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.handleLogin(resData)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(()=>{\n\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t\tconnectionError()\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.handleVerification(email)\n\t\t\t}\n\t\t}\n    }\n\n    handleLogin = (resData) => {\n    \tconst { presentAlert, updateURL, updateUser, prevPath } = this.props;\n    \tconst { SEARCH, LOGIN, REGISTER, VERIFY } = routes;\n    \tconst user = this.createUser(resData.user)\n\t\tconst alert = {\n\t        title: 'Login Successful',\n\t        message: `You are now logged in as ${user.userName}.`,\n\t        showAlert: true,\n\t    }\n\t    const cookies = new Cookies();\n\t\tcookies.set('authToken', resData.token, { path: '/' });\n\t\tupdateUser(user);\n\t\tpresentAlert(alert);\n\t\tif (prevPath) {\n\t\t\tconst changePath = prevPath === LOGIN || prevPath === REGISTER || prevPath === VERIFY;\n\t\t\tupdateURL(changePath ? SEARCH : prevPath)\n\t\t} else {\n\t\t\tupdateURL(SEARCH)\n\t\t}\n\t\t\n    }\n\n    onVerifyEmail = () => {\n    \tconst { token, password, password2 } = this.state;\n    \tconst { setLoading, updateURL } = this.props;\n    \tconst { RESET } = routes;\n    \tconst passwordIsValid = this.validatePassword(password);\n    \tif (passwordIsValid && password === password2) {\n    \t\tsetLoading(true)\n    \t\tapiRequest({\n\t\t\t\tendPoint: '/register/complete',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: {password, token} \n\t\t\t})\n\t\t\t.then(resData => {\n\t\t\t\tsetLoading(false)\n\t\t\t\tif (resData && resData.error != null) {\n\t\t\t\t\tconst { name, title, message } = resData.error;\n\t\t\t\t\tif (name === 'PasswordTokenExpired') {\n\t\t\t\t\t\toptionAlert({\n\t\t\t\t\t\t    title,\n\t\t\t\t\t\t    message: `${message} Would you like to reset your password now?`,\n\t\t\t\t\t\t    buttons: [\n\t\t\t\t\t\t      {\n\t\t\t\t\t\t        label: 'Yes',\n\t\t\t\t\t\t        onClick: ()=>updateURL(RESET)\n\t\t\t\t\t\t      },\n\t\t\t\t\t\t      { \n\t\t\t\t\t\t        label: 'No',\n\t\t\t\t\t\t        onClick: null\n\t\t\t\t\t\t      }\n\t\t\t\t\t\t    ]\n\t\t\t\t\t    })\n\t\t\t\t\t} else if (name === 'UserNotFound') {\n\t\t\t\t\t\tthis.askToRegister({\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\tmessage: `${message} Would you like to register now?`\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.handleLogin(resData)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(()=>{\n\t\t\t\tsetLoading(false)\n\t\t\t\tconnectionError()\n\t\t\t})\n    \t} else if (!passwordIsValid) {\n    \t\tthis.passwordIsIncomplete()\n    \t} else if (password !== password2) {\n    \t\toptionAlert({\n\t\t\t    title: 'Passwords Do Not Match',\n\t\t\t    message: 'Please ensure that both passwords are matching.'\n\t\t    })\n    \t}\n    }\n\n    handleVerification = (email) => {\n    \tconst { name, didAgree } = this.state;\n    \tconst { setLoading } = this.props;\n    \tif (!/\\S/.test(name)) {\n    \t\toptionAlert({\n\t\t\t    title: 'Provide your name',\n\t\t\t    message: `You must provide your full name in order to proceed with regsitration.`\n\t\t    })\n    \t} else if (!didAgree) {\n    \t\toptionAlert({\n\t\t\t    title: 'Privacy Policy',\n\t\t\t    message: `Please click the checkbox next to the privacy agreement in order to proceed with registration.`\n\t\t    })\n    \t} else {\n    \t\tconst body = {name, email}\n\t    \tsetLoading(true)\n\t\t\t\tapiRequest({\n\t\t\t\t\tendPoint: '/register',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: body\n\t\t\t\t})\n\t\t\t\t\t.then(userData => {\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\tif (userData && userData.error != null) {\n\t\t\t\t\t\t\tconst { title, message } = userData.error;\n\t\t\t\t\t\t\toptionAlert({\n\t\t\t\t\t\t\t    title,\n\t\t\t\t\t\t\t    message\n\t\t\t\t\t\t    })\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toptionAlert({\n\t\t\t\t\t\t\t    title: 'Verification Email Sent',\n\t\t\t\t\t\t\t    message: `Please check your email (${userData.email}) for a verification email. If you don't see the email shortly, check your spam folder.`\n\t\t\t\t\t\t    })\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err=>{\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\tconnectionError()\n\t\t\t\t\t})\n    \t}\n    }\n\n    onResetPassword = (email) => {\n    \tif (validateEmail(email)) {\n    \t\tthis.handleVerification(email)\n    \t} else {\n    \t\tthis.emailIsNotCorrect()\n    \t}\n    }\n\n    passwordIsIncomplete = () => {\n    \toptionAlert({\n\t\t    title: 'Invalid Password',\n\t\t    message: 'The password you have entered is incomplete. Please note that passwords must contain at least 6 characters.',\n\t    })\n    }\n\n    emailIsNotCorrect = () => {\n    \toptionAlert({\n\t\t    title: 'Invalid Email Address',\n\t\t    message: 'The email address you have entered is incomplete.',\n\t    })\n    }\n\n    responseFacebook = (response) => {\n    \tconst { setLoading } = this.props;\n    \tif (response && response.email) {\n    \t\tconst { accessToken, id, email, name } = response;\n    \t\tsetLoading(true)\n\t\t\tapiRequest({\n\t\t\t\tendPoint: '/api/v1/auth/facebook',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: {accessToken, id, email, name}\n\t\t\t})\n\t\t\t\t.then(userData => {\n\t\t\t\t\tif (userData && userData.error != null) {\n\t\t\t\t\t\tconst { title, message } = userData.error;\n\t\t\t\t\t\toptionAlert({\n\t\t\t\t\t\t    title,\n\t\t\t\t\t\t    message\n\t\t\t\t\t    })\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.handleLogin(userData)\n\t\t\t\t\t}\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t})\n\t\t\t\t.catch(err=>{\n\t\t\t\t\tsetLoading(false)\n\t\t\t\t\tconnectionError()\n\t\t\t\t})\n    \t} else {\n    \t\toptionAlert({\n\t\t\t    title: 'Facebook Error',\n\t\t\t    message: 'There was an error logging in using Facebook. Please ensure that you are signed in to FaceBook.',\n\t\t    })\n    \t}\n    }\n\n    handleAgree = () => {\n    \tthis.setState({didAgree: !this.state.didAgree})\n    }\n\n    renderPassword = (margin) => {\n    \tconst { password } = this.state;\n    \treturn (\n    \t\t<TextInput \n\t\t\t\ticon='locked-4' \n\t\t\t\tmargin={margin}\n\t\t\t\tplaceholder='Password'\n\t\t\t\tvalue={password}\n\t\t\t\ttype='password'\n\t\t\t\tid='password'\n\t\t\t\thandleChange={this.onInputChange}\n\t\t\t/>\n    \t)\n    }\n\n    renderEmail = () => {\n    \tconst { email } = this.state;\n    \treturn (\n    \t\t<TextInput \n\t\t\t\ticon='user-3' \n\t\t\t\tmargin='20px 0'\n\t\t\t\tplaceholder='Email Address'\n\t\t\t\tvalue={email}\n\t\t\t\tid='email'\n\t\t\t\tname='email'\n\t\t\t\ttype='text'\n\t\t\t\thandleChange={this.onInputChange}\n\t\t\t/>\n    \t)\n    }\n\n    renderComponent = (pathName) => {\n    \tconst { title, email, name, password2, signInButton, alternateButton, didAgree } = this.state;\n    \tconst { LOGIN, REGISTER, VERIFY, RESET, PRIVACY } = routes;\n    \tconst { updateURL } = this.props;\n    \tif (pathName === RESET || pathName === VERIFY) {\n    \t\tconst heading = pathName === RESET ? 'Reset Account' : 'Set Password'\n\t\t\tconst line = pathName === RESET ? 'We will email you a link to reset your password.' : 'Please put your new password in both fields below.'\n    \t\treturn (\n    \t\t\t<div className='sign-in-container'>\n\t\t\t\t\t<div className='panel'>\n\t\t\t\t\t\t<h2 className='heading'>{heading}</h2>\n\t\t\t\t\t\t<p>{line}</p>\n\t\t\t\t\t\t{pathName === RESET && this.renderEmail()}\n\t\t\t\t\t\t{pathName === VERIFY &&\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{this.renderPassword('20px 0 0 0')}\n\t\t\t\t\t\t\t\t<TextInput \n\t\t\t\t\t\t\t\t\ticon='locked-4' \n\t\t\t\t\t\t\t\t\tmargin='20px 0'\n\t\t\t\t\t\t\t\t\tplaceholder='Retype Password'\n\t\t\t\t\t\t\t\t\tvalue={password2}\n\t\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\t\tid='password2'\n\t\t\t\t\t\t\t\t\thandleChange={this.onInputChange}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\tbuttonType='ghost' \n\t\t\t\t\t\t\ttitle='Continue'\n\t\t\t\t\t\t\tmargin='0 0 30px 0'\n\t\t\t\t\t\t\thandleClick={pathName === VERIFY\n\t\t\t\t\t\t\t\t?\t()=>this.onVerifyEmail()\n\t\t\t\t\t\t\t\t:   ()=>this.onResetPassword(email)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n    \t\t)\n    \t} else if (pathName === LOGIN || pathName === REGISTER) {\n    \t\tconst first = pathName === LOGIN ? 'Welcome Back,' : 'Welcome to CantoTalk!'\n\t\t\tconst second = pathName === LOGIN ? 'we\\'re happy to see you!' : 'But Why Register?'\n\t\t\tconst message = pathName === LOGIN\n\t\t\t\t? 'Don\\'t forget to use your CantoTalk profile to its fullest by keeping track of learned words and practicing with the flash card decks!'\n\t\t\t\t: 'Creating a profile allows you to keep track of your previous searches, save favorites, build your own flash card decks, and more! This will also make it possible to sync information between devices. '\n\n\t\t\tconst buttonDisabled = signInButton === 'Register' ? (!didAgree || !name || !email) : false\n\n    \t\treturn (\n    \t\t\t<div className='sign-in-container'>\n\t\t\t\t\t<div className='panel'>\n\t\t\t\t\t\t<div className='heading-container'>\n\t\t\t\t\t\t\t<MediaQuery minWidth={361}>\n\t\t\t\t\t\t\t\t<h1 className='heading pink'>{first}</h1>\n\t\t\t\t\t\t\t\t<h1 className='heading'>{second}</h1>\n\t\t\t\t\t\t\t</MediaQuery>\n\t\t\t\t\t\t\t<MediaQuery maxWidth={360}>\n\t\t\t\t\t\t\t\t<h2 className='heading pink'>{first}</h2>\n\t\t\t\t\t\t\t\t<h2 className='heading'>{second}</h2>\n\t\t\t\t\t\t\t</MediaQuery>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>{message}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<form className='panel' autoComplete='on'>\n\t\t\t\t\t\t<h2 className='right-title'>{title}</h2>\n\t\t\t\t\t\t{pathName === REGISTER &&\n\t\t\t\t\t\t\t<TextInput \n\t\t\t\t\t\t\t\ticon='user-3' \n\t\t\t\t\t\t\t\tmargin='0'\n\t\t\t\t\t\t\t\tplaceholder='Full Name'\n\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\tid='name'\n\t\t\t\t\t\t\t\tname='name'\n\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\thandleChange={this.onInputChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{this.renderEmail()}\n\t\t\t\t\t\t{pathName === LOGIN && this.renderPassword('0 0 20px 0')}\n\t\t\t\t\t\t{pathName === REGISTER &&\n\t\t\t\t\t\t\t<div className='agree-row'>\n\t\t\t\t\t\t\t\t<input \n\t                                className='checkbox'\n\t                                id='checkbox'\n\t                                type=\"checkbox\" \n\t                                onChange={this.handleAgree} \n\t                                defaultChecked={didAgree}\n\t                            />\n\t                            <label \n\t                                className='checkbox-label' \n\t                                htmlFor=\"checkbox\"\n\t                            ></label>\n\t                            <p className='mini'>I agree to the <Link to={PRIVACY} target='_blank' className='mini'>privacy policy</Link></p>\n                            </div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div className='button-row'>\n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\ttitle={signInButton}\n\t\t\t\t\t\t\t\tmargin='10px 20px 10px 0'\n\t\t\t\t\t\t\t\tisDisabled={buttonDisabled}\n\t\t\t\t\t\t\t\thandleClick={this.onUserSubmit}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p>or</p>\n\t\t\t\t\t\t\t<FacebookLogin\n\t\t\t\t\t\t        appId={config.FACEBOOK_APP_ID}\n\t\t\t\t\t\t        fields='name,email,picture'\n\t\t\t\t\t\t        cssClass='custom-fb-button'\n\t\t\t\t\t\t        callback={this.responseFacebook}\n\t\t\t\t\t\t        disableMobileRedirect={true}\n\t\t\t\t\t\t    />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{pathName === LOGIN &&\n\t\t\t\t\t\t\t<div className='bottom-row'>\n\t\t\t\t\t\t\t\t<p \n\t\t\t\t\t\t\t\t\tclassName='mini button' \n\t\t\t\t\t\t\t\t\tonClick={()=>updateURL(RESET)}\n\t\t\t\t\t\t\t\t>Forgot Password</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t<div className='bottom-row'>\n\t\t\t\t\t\t\t<p className='mini'>\n\t\t\t\t\t\t\t\t{pathName === LOGIN\n\t\t\t\t\t\t\t\t\t? 'New to CantoTalk?'\n\t\t\t\t\t\t\t\t\t: 'Already Registered?'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p \n\t\t\t\t\t\t\t\tclassName='mini button' \n\t\t\t\t\t\t\t\tonClick={() => this.signInToggle(alternateButton)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{alternateButton}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n    \t\t)\n    \t}\n\n    }\n\n\trender() {\n\t\tconst { pathName } = this.props;\n\t\treturn (\n\t\t\t<div className='sign-in-page'>\n\t\t\t\t{this.renderComponent(pathName)}\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(SignIn);"]},"metadata":{},"sourceType":"module"}