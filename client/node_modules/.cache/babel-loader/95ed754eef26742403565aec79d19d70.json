{"ast":null,"code":"import _classCallCheck from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brianmacpherson/Desktop/cantotalkweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brianmacpherson/Desktop/cantotalkweb/src/pages/learn/learn.component.js\";\nimport React, { Component } from 'react';\nimport './learn.styles.css';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport MediaQuery from 'react-responsive';\nimport queryString from 'query-string';\nimport apiRequest from '../../helpers/apiRequest';\nimport SearchBar from '../../components/search-bar/search-bar.component';\nimport Deck from '../../components/deck/deck.component';\nimport { setLoading as _setLoading } from '../../redux/loading/loading.actions';\nimport { setPrevRoute as _setPrevRoute } from '../../redux/routing/routing.actions';\nimport { routes } from '../../redux/routing/routing.constants';\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n  return {\n    user: state.user.user,\n    pathName: state.router.location.pathname,\n    hash: state.router.location.hash,\n    search: state.router.location.search\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    updateURL: function updateURL(searchKey) {\n      return dispatch(push(searchKey));\n    },\n    setPrevRoute: function setPrevRoute(prevRoute) {\n      return dispatch(_setPrevRoute(prevRoute));\n    },\n    setLoading: function setLoading(loading) {\n      return dispatch(_setLoading(loading));\n    }\n  };\n};\n\nvar Learn =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Learn, _Component);\n\n  function Learn(props) {\n    var _this;\n\n    _classCallCheck(this, Learn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Learn).call(this, props));\n\n    _this.getDecks = function () {\n      var search = _this.props.search;\n\n      if (search) {\n        var values = queryString.parse(search);\n\n        _this.handleDeckSearch(values.decksearch);\n      } else {\n        _this.getGeneralDecks();\n      }\n    };\n\n    _this.getGeneralDecks = function () {\n      var _this$props = _this.props,\n          setLoading = _this$props.setLoading,\n          userID = _this$props.user.userID;\n      var endPoint = userID ? '/get-decks-id' : '/get-decks';\n      var method = userID ? 'POST' : 'GET';\n      setLoading(true);\n      apiRequest({\n        endPoint: endPoint,\n        method: method,\n        body: userID ? {\n          userID: userID\n        } : null\n      }).then(function (data) {\n        setLoading(false);\n\n        if (data && !data.error) {\n          _this.filterDecks(data);\n        }\n      }).catch(function (err) {\n        console.log(err);\n        setLoading(false);\n      });\n    };\n\n    _this.handleDeckSearch = function (key) {\n      var _this$props2 = _this.props,\n          setLoading = _this$props2.setLoading,\n          userID = _this$props2.user.userID;\n      var body = userID ? {\n        userID: userID,\n        key: key\n      } : {\n        key: key\n      };\n      var endPoint = userID ? '/search-decks-id' : '/search-decks';\n      setLoading(true);\n      apiRequest({\n        endPoint: endPoint,\n        method: 'POST',\n        body: body\n      }).then(function (data) {\n        console.log(data);\n        setLoading(false);\n\n        if (data && !data.error) {\n          _this.filterDecks(data);\n        }\n      }).catch(function () {\n        return setLoading(false);\n      });\n    };\n\n    _this.filterDecks = function (list) {\n      var userID = _this.props.user.userID;\n      var officialDecks = list.filter(function (deck) {\n        return deck.user_id === 0;\n      });\n      var personalDecks;\n      var otherDecks;\n\n      if (userID) {\n        personalDecks = list.filter(function (deck) {\n          return deck.user_id === userID;\n        });\n        otherDecks = list.filter(function (deck) {\n          return deck.user_id !== userID && deck.user_id !== 0;\n        });\n      } else {\n        otherDecks = list.filter(function (deck) {\n          return deck.user_id !== 0;\n        });\n      }\n\n      _this.setState({\n        officialDecks: officialDecks,\n        personalDecks: personalDecks,\n        otherDecks: otherDecks\n      });\n    };\n\n    _this.handleDeck = function (deck) {\n      var updateURL = _this.props.updateURL;\n      var DECK = routes.DECK;\n      updateURL(\"\".concat(DECK, \"?deck=\").concat(deck.deck_id));\n\n      _this.setState({\n        selectedDeck: deck\n      });\n    };\n\n    _this.renderSection = function (heading, deckList, color) {\n      return React.createElement(MediaQuery, {\n        maxWidth: 699,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, function (matches) {\n        return React.createElement(\"div\", {\n          className: \"deck-section-container\",\n          style: {\n            background: color || null\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, matches ? React.createElement(\"h3\", {\n          className: \"section-headers\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, heading) : React.createElement(\"h2\", {\n          className: \"section-headers\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, heading), React.createElement(\"div\", {\n          className: \"deck-section\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, deckList.map(function (deck, i) {\n          return React.createElement(Deck, {\n            key: i,\n            deck: deck,\n            handleClick: _this.handleDeck,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          });\n        })));\n      });\n    };\n\n    _this.state = {\n      personalDecks: [],\n      officialDecks: [],\n      otherDecks: [],\n      selectedDeck: {}\n    };\n    return _this;\n  }\n\n  _createClass(Learn, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getDecks();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props3 = this.props,\n          pathName = _this$props3.pathName,\n          search = _this$props3.search;\n      var LEARN = routes.LEARN;\n\n      if (pathName === LEARN && prevProps.search !== search) {\n        this.getDecks();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          officialDecks = _this$state.officialDecks,\n          personalDecks = _this$state.personalDecks,\n          otherDecks = _this$state.otherDecks;\n      return React.createElement(\"div\", {\n        className: \"page over-flow-y\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"deck-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, personalDecks && personalDecks.length > 0 && this.renderSection('Your Decks', personalDecks, 'var(--cantoGray)'), officialDecks && officialDecks.length > 0 && this.renderSection('CantoTalk Decks', officialDecks, 'var(--cantoPink)'), otherDecks && otherDecks.length > 0 && this.renderSection('Public Decks', otherDecks, 'var(--cantoDarkGray)')), React.createElement(\"div\", {\n        className: \"deck-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Learn;\n}(Component);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Learn);","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/src/pages/learn/learn.component.js"],"names":["React","Component","connect","push","MediaQuery","queryString","apiRequest","SearchBar","Deck","setLoading","setPrevRoute","routes","mapStateToProps","state","ownProps","user","pathName","router","location","pathname","hash","search","mapDispatchToProps","dispatch","updateURL","searchKey","prevRoute","loading","Learn","props","getDecks","values","parse","handleDeckSearch","decksearch","getGeneralDecks","userID","endPoint","method","body","then","data","error","filterDecks","catch","err","console","log","key","list","officialDecks","filter","deck","user_id","personalDecks","otherDecks","setState","handleDeck","DECK","deck_id","selectedDeck","renderSection","heading","deckList","color","matches","background","map","i","prevProps","LEARN","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './learn.styles.css';\nimport { connect } from 'react-redux';\nimport { push } from 'connected-react-router';\nimport MediaQuery from 'react-responsive';\nimport queryString from 'query-string';\nimport apiRequest from '../../helpers/apiRequest';\nimport SearchBar from '../../components/search-bar/search-bar.component';\nimport Deck from '../../components/deck/deck.component';\nimport { setLoading } from '../../redux/loading/loading.actions';\nimport { setPrevRoute } from '../../redux/routing/routing.actions';\nimport { routes } from '../../redux/routing/routing.constants';\n\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n  \tuser: state.user.user,\n    pathName: state.router.location.pathname,\n    hash: state.router.location.hash,\n    search: state.router.location.search,\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tupdateURL: (searchKey) => dispatch(push(searchKey)),\n\t\tsetPrevRoute: (prevRoute) => dispatch(setPrevRoute(prevRoute)),\n\t\tsetLoading: (loading) => dispatch(setLoading(loading)),\n\t}\n} \n\nclass Learn extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tpersonalDecks: [],\n\t\t\tofficialDecks: [],\n\t\t\totherDecks: [],\n\t\t\tselectedDeck: {}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getDecks()\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { pathName, search } = this.props;\n\t\tconst { LEARN } = routes;\n\t\tif (pathName === LEARN && prevProps.search !== search) {\n\t\t\tthis.getDecks()\n\t\t}\n\t}\n\n\tgetDecks = () => {\n\t\tconst { search } = this.props;\n\t\tif (search) {\n\t\t\tconst values = queryString.parse(search)\n\t\t\tthis.handleDeckSearch(values.decksearch)\n\t\t} else {\n\t\t\tthis.getGeneralDecks()\n\t\t}\n\t}\n\n\tgetGeneralDecks = () => {\n\t\tconst { setLoading, user: { userID } } = this.props;\n\t\tconst endPoint = userID ? '/get-decks-id' : '/get-decks'\n\t\tconst method = userID ? 'POST' : 'GET' \n\t\tsetLoading(true)\n\t\tapiRequest({\n\t\t\tendPoint,\n\t\t\tmethod,\n\t\t\tbody: userID ? {userID} : null \n\t\t})\n\t\t\t.then(data => {\n\t\t\t\tsetLoading(false)\n\t\t\t\tif (data && !data.error) {\n\t\t\t\t\tthis.filterDecks(data)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(err=>{\n\t\t\t\tconsole.log(err)\n\t\t\t\tsetLoading(false)\n\t\t\t})\n\t}\n\n\thandleDeckSearch = (key) => {\n\t\tconst { setLoading, user: { userID } } = this.props;\n\t\tconst body = userID ? { userID, key } : { key }\n\t\tconst endPoint = userID ? '/search-decks-id' : '/search-decks'\n\t\tsetLoading(true)\n\t\tapiRequest({\n\t\t\tendPoint,\n\t\t\tmethod: 'POST',\n\t\t\tbody\n\t\t})\n\t\t\t.then(data => {\n\t\t\t\tconsole.log(data)\n\t\t\t\tsetLoading(false)\n\t\t\t\tif (data && !data.error) {\n\t\t\t\t\tthis.filterDecks(data)\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(()=>setLoading(false))\n\t}\n\n\tfilterDecks = (list) => {\n\t\tconst { user: { userID } } = this.props;\n\t\tconst officialDecks = list.filter(deck => {\n\t\t\treturn deck.user_id === 0;\n\t\t})\n\n\t\tlet personalDecks;\n\t\tlet otherDecks;\n\t\tif (userID) {\n\t\t\tpersonalDecks = list.filter(deck => {\n\t\t\t\treturn deck.user_id === userID;\n\t\t\t})\n\n\t\t\totherDecks = list.filter(deck => {\n\t\t\t\treturn deck.user_id !== userID && deck.user_id !== 0;\n\t\t\t})\n\t\t} else {\n\t\t\totherDecks = list.filter(deck => {\n\t\t\t\treturn deck.user_id !== 0;\n\t\t\t})\n\t\t}\n\t\t\n\t\tthis.setState({officialDecks, personalDecks, otherDecks})\n\t}\n\n\thandleDeck = (deck) => {\n\t\tconst { updateURL } = this.props;\n\t\tconst { DECK } = routes;\n\t\tupdateURL(`${DECK}?deck=${deck.deck_id}`)\n\t\tthis.setState({selectedDeck: deck})\n\t}\n\n\trenderSection = (heading, deckList, color) => {\n\t\treturn (\n\t\t\t<MediaQuery maxWidth={699}>\n\t\t\t\t{(matches) => {\n\t\t\t\t\treturn \t(\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclassName='deck-section-container'\n\t\t\t\t\t\t\tstyle={{background: color || null}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{matches\n\t\t\t\t\t\t\t\t?\t<h3 className='section-headers'>{heading}</h3>\n\t\t\t\t\t\t\t\t: \t<h2 className='section-headers'>{heading}</h2>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<div className='deck-section'>\n\t\t\t\t\t\t\t\t{ \n\t\t\t\t\t\t\t\t\tdeckList.map((deck, i) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Deck \n\t\t\t\t\t\t\t\t\t\t\t\tkey={i} \n\t\t\t\t\t\t\t\t\t\t\t\tdeck={deck} \n\t\t\t\t\t\t\t\t\t\t\t\thandleClick={this.handleDeck} \n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</MediaQuery>\n\t\t)\n\t}\n\n\n\trender() {\n\t\tconst { officialDecks, personalDecks, otherDecks } = this.state;\n\t\treturn (\n\t\t\t<div className='page over-flow-y'>\n\t\t\t\t<div className='deck-container'>\n\t\t\t\t\t{personalDecks && personalDecks.length > 0 &&\n\t\t\t\t\t\tthis.renderSection('Your Decks', personalDecks, 'var(--cantoGray)')\n\t\t\t\t\t}\n\t\t\t\t\t{officialDecks && officialDecks.length > 0 &&\n\t\t\t\t\t\tthis.renderSection('CantoTalk Decks', officialDecks, 'var(--cantoPink)')\n\t\t\t\t\t}\n\t\t\t\t\t{otherDecks && otherDecks.length > 0 &&\n\t\t\t\t\t\tthis.renderSection('Public Decks', otherDecks, 'var(--cantoDarkGray)')\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div className='deck-search'>\n\t\t\t\t\t<SearchBar />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Learn);"]},"metadata":{},"sourceType":"module"}