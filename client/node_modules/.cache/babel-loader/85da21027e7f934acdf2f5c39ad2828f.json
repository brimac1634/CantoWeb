{"ast":null,"code":"import _classCallCheck from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brianmacpherson/Desktop/cantotalkweb/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brianmacpherson/Desktop/cantotalkweb/client/src/components/compound/controller.component.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nvar Controller =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Controller, _Component);\n\n  function Controller(props) {\n    var _this;\n\n    _classCallCheck(this, Controller);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Controller).call(this, props));\n\n    _this.handleEntryKey = function (event) {\n      if (event.which === 13) {\n        _this.setState({\n          show: false\n        });\n      }\n    };\n\n    _this.setPositition = function (rect) {\n      _this.setState({\n        triggerRect: {\n          x: rect.x,\n          y: rect.y,\n          width: rect.width,\n          height: rect.height\n        }\n      });\n    };\n\n    _this.animateOut = function (event) {\n      _this.setState({\n        animateOut: true\n      });\n\n      setTimeout(function () {\n        _this.setState({\n          show: false,\n          animateOut: false\n        });\n      }, 400);\n    };\n\n    _this.toggle = function () {\n      var show = _this.state.show;\n\n      if (show) {\n        _this.animateOut();\n      } else {\n        _this.setState({\n          show: !_this.state.show,\n          animateOut: false\n        });\n      }\n    };\n\n    _this.state = {\n      show: false,\n      animateOut: false,\n      triggerRect: {\n        x: '',\n        y: '',\n        width: '',\n        height: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Controller, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if (_this2.state.show) {\n          window.addEventListener('click', _this2.animateOut);\n          window.addEventListener('keydown', _this2.handleEntryKey);\n        } else {\n          window.removeEventListener('click', _this2.animateOut);\n          window.removeEventListener('keydown', _this2.handleEntryKey);\n        }\n      }, 0);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var children = this.props.children;\n      var _this$state = this.state,\n          show = _this$state.show,\n          triggerRect = _this$state.triggerRect,\n          animateOut = _this$state.animateOut;\n      var childrenWithProps = React.Children.map(children, function (child, i) {\n        if (i === 0) {\n          return React.cloneElement(child, {\n            toggle: _this3.toggle,\n            setPositition: _this3.setPositition\n          });\n        } else {\n          if (show) {\n            return ReactDOM.createPortal(React.createElement(\"span\", {\n              className: \"compound-span\",\n              onClick: function onClick(event) {\n                return event.stopPropagation();\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 84\n              },\n              __self: this\n            }, React.cloneElement(child, {\n              toggle: _this3.toggle,\n              show: show,\n              triggerRect: triggerRect,\n              animateOut: animateOut\n            })), document.body);\n          }\n        }\n      });\n      return React.createElement(\"div\", {\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, childrenWithProps);\n    }\n  }]);\n\n  return Controller;\n}(Component);\n\nexport default Controller;","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/client/src/components/compound/controller.component.js"],"names":["React","Component","ReactDOM","Controller","props","handleEntryKey","event","which","setState","show","setPositition","rect","triggerRect","x","y","width","height","animateOut","setTimeout","toggle","state","window","addEventListener","removeEventListener","children","childrenWithProps","Children","map","child","i","cloneElement","createPortal","stopPropagation","document","body"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport ReactDOM from 'react-dom';\n\nclass Controller extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshow: false,\n\t\t\tanimateOut: false,\n\t\t\ttriggerRect: {\n\t\t\t\tx: '',\n\t\t\t\ty: '',\n\t\t\t\twidth: '',\n\t\t\t\theight: ''\n\t\t\t},\n\t\t}\n\t}\n\n\tcomponentDidUpdate(){\n\t\tsetTimeout(() => {\n\t\t  if(this.state.show){\n\t\t    window.addEventListener('click', this.animateOut)\n\t\t    window.addEventListener('keydown', this.handleEntryKey)\n\t\t  } else {\n\t\t    window.removeEventListener('click', this.animateOut)\n\t\t    window.removeEventListener('keydown', this.handleEntryKey)\n\t\t  }\n\t\t}, 0)\n\t}\n\n\thandleEntryKey = (event) => {\n\t\tif (event.which === 13) {\n\t\t\tthis.setState({\n\t\t\t\tshow: false,\n\t\t\t})\n\t\t}\n\t}\n\n\tsetPositition = (rect) => {\n\t\tthis.setState({\n\t\t\ttriggerRect: {\n\t\t\t\tx: rect.x,\n\t\t\t\ty: rect.y,\n\t\t\t\twidth: rect.width,\n\t\t\t\theight: rect.height,\n\t\t\t}\n\t\t})\n\t}\n\n\tanimateOut = (event) => {\n\t\tthis.setState({\n\t\t\tanimateOut: true,\n\t\t})\n\t\tsetTimeout(() => {\n\t\t\tthis.setState({\n\t\t\tshow: false,\n\t\t\tanimateOut: false,\n\t\t})\n\t\t}, 400)\n\t}\n\n\ttoggle = () => {\n\t\tconst { show } = this.state;\n\t\tif (show) {\n\t\t\tthis.animateOut()\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tshow: !this.state.show,\n\t\t\t\tanimateOut: false,\n\t\t\t})\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children } = this.props;\n\t\tconst { show, triggerRect, animateOut } = this.state;\n\n\t\tconst childrenWithProps = React.Children.map(children, (child, i) => {\n\t\t      if (i === 0) {\n\t\t      \t return React.cloneElement(child, { toggle: this.toggle, setPositition: this.setPositition })\n\t\t      } else {\n\t\t      \tif (show) {\n\t\t      \t\treturn ReactDOM.createPortal(\n\t\t\t            <span className='compound-span' onClick={event => event.stopPropagation()}>\n\t\t\t\t            {React.cloneElement(child, { toggle: this.toggle, show: show, triggerRect: triggerRect, animateOut: animateOut })}\n\t\t\t\t        </span>\n\t\t\t\t        , document.body\n\t\t\t        )\n\t\t      \t}\n\t\t      }\n\t      \n\t    });\n\n\n\t    return (\n\t    \t<div style={{width: '100%', height: '100%'}}>\n\t\t    \t{childrenWithProps}\n\t    \t</div>\n\t    );\n\t}\n}\nexport default Controller;"]},"metadata":{},"sourceType":"module"}