{"ast":null,"code":"import axios from 'axios';\nexport var setupPlayBack = function setupPlayBack(context, audio) {\n  var playSound = context.createBufferSource();\n  playSound.buffer = audio;\n  playSound.connect(context.destination);\n  return playSound;\n};\nexport var audioRequest = function audioRequest(entryID, playNow) {\n  var AudioContext = window.AudioContext || window.webkitAudioContext;\n  var context = new AudioContext();\n  return axios({\n    method: 'POST',\n    url: '/stream-audio',\n    data: {\n      entryID: entryID\n    },\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(function (_ref) {\n    var data = _ref.data;\n\n    if (data.status === 404) {\n      throw new Error();\n    } else {\n      return data.arrayBuffer();\n    }\n  }).then(function (arrayBuffer) {\n    console.log(arrayBuffer);\n\n    if (playNow) {\n      context.decodeAudioData(arrayBuffer, function (decodedAudio) {\n        var playSound = setupPlayBack(context, decodedAudio);\n        playSound.start(0);\n      }, function () {\n        return new Error();\n      });\n    } else {\n      return {\n        context: context,\n        arrayBuffer: arrayBuffer\n      };\n    }\n  }).catch();\n};","map":{"version":3,"sources":["/Users/brianmacpherson/Desktop/cantotalkweb/client/src/helpers/audioRequest.js"],"names":["axios","setupPlayBack","context","audio","playSound","createBufferSource","buffer","connect","destination","audioRequest","entryID","playNow","AudioContext","window","webkitAudioContext","method","url","data","headers","then","status","Error","arrayBuffer","console","log","decodeAudioData","decodedAudio","start","catch"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,OAAD,EAAUC,KAAV,EAAoB;AAC7C,MAAMC,SAAS,GAAGF,OAAO,CAACG,kBAAR,EAAlB;AACAD,EAAAA,SAAS,CAACE,MAAV,GAAmBH,KAAnB;AACAC,EAAAA,SAAS,CAACG,OAAV,CAAkBL,OAAO,CAACM,WAA1B;AACA,SAAOJ,SAAP;AACH,CALM;AAOP,OAAO,IAAMK,YAAY,GAAG,SAAfA,YAAe,CAACC,OAAD,EAAUC,OAAV,EAAsB;AAC9C,MAAIC,YAAY,GAAGC,MAAM,CAACD,YAAP,IAAuBC,MAAM,CAACC,kBAAjD;AACA,MAAMZ,OAAO,GAAG,IAAIU,YAAJ,EAAhB;AACA,SAAOZ,KAAK,CAAC;AACTe,IAAAA,MAAM,EAAE,MADC;AAETC,IAAAA,GAAG,EAAE,eAFI;AAGTC,IAAAA,IAAI,EAAE;AAACP,MAAAA,OAAO,EAAPA;AAAD,KAHG;AAITQ,IAAAA,OAAO,EAAE;AAAC,sBAAgB;AAAjB;AAJA,GAAD,CAAL,CAKJC,IALI,CAKC,gBAAc;AAAA,QAAXF,IAAW,QAAXA,IAAW;;AAClB,QAAIA,IAAI,CAACG,MAAL,KAAgB,GAApB,EAAyB;AACrB,YAAM,IAAIC,KAAJ,EAAN;AACH,KAFD,MAEO;AACH,aAAOJ,IAAI,CAACK,WAAL,EAAP;AACH;AACJ,GAXM,EAWJH,IAXI,CAWC,UAAAG,WAAW,EAAI;AACnBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ;;AACA,QAAIX,OAAJ,EAAa;AACTT,MAAAA,OAAO,CAACuB,eAAR,CAAwBH,WAAxB,EAAqC,UAAAI,YAAY,EAAI;AACjD,YAAMtB,SAAS,GAAGH,aAAa,CAACC,OAAD,EAAUwB,YAAV,CAA/B;AACAtB,QAAAA,SAAS,CAACuB,KAAV,CAAgB,CAAhB;AACH,OAHD,EAGG;AAAA,eAAI,IAAIN,KAAJ,EAAJ;AAAA,OAHH;AAIH,KALD,MAKO;AACH,aAAO;AAACnB,QAAAA,OAAO,EAAPA,OAAD;AAAUoB,QAAAA,WAAW,EAAXA;AAAV,OAAP;AACH;AACJ,GArBM,EAqBJM,KArBI,EAAP;AAsBH,CAzBM","sourcesContent":["import axios from 'axios';\n\nexport const setupPlayBack = (context, audio) => {\n    const playSound = context.createBufferSource();\n    playSound.buffer = audio;\n    playSound.connect(context.destination);\n    return playSound\n}\n\nexport const audioRequest = (entryID, playNow) => {\n    let AudioContext = window.AudioContext || window.webkitAudioContext;\n    const context = new AudioContext();\n    return axios({\n        method: 'POST',\n        url: '/stream-audio',\n        data: {entryID},\n        headers: {'Content-Type': 'application/json'}\n    }).then(({ data }) => {\n        if (data.status === 404) {\n            throw new Error()\n        } else {\n            return data.arrayBuffer()\n        }\n    }).then(arrayBuffer => {\n        console.log(arrayBuffer)\n        if (playNow) {\n            context.decodeAudioData(arrayBuffer, decodedAudio => {\n                const playSound = setupPlayBack(context, decodedAudio)\n                playSound.start(0);\n            }, ()=>new Error())\n        } else {\n            return {context, arrayBuffer}\n        }\n    }).catch()\t\t\n}\n"]},"metadata":{},"sourceType":"module"}